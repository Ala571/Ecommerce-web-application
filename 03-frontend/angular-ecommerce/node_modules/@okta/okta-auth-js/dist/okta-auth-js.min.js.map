{"version":3,"sources":["webpack://OktaAuth/webpack/bootstrap","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://OktaAuth/./lib/util.ts","webpack://OktaAuth/./lib/errors/AuthSdkError.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://OktaAuth/./lib/http.ts","webpack://OktaAuth/./lib/constants.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/inherits.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/createClass.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/typeof.js","webpack://OktaAuth/./lib/errors/CustomError.ts","webpack://OktaAuth/./lib/tx/util.ts","webpack://OktaAuth/./lib/browser/browserStorage.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://OktaAuth/./lib/tx/AuthTransaction.ts","webpack://OktaAuth/./lib/oauthUtil.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack://OktaAuth/./node_modules/@babel/runtime/regenerator/index.js","webpack://OktaAuth/./lib/builderUtil.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://OktaAuth/./lib/tx/index.ts","webpack://OktaAuth/./lib/tx/api.ts","webpack://OktaAuth/./lib/errors/AuthApiError.ts","webpack://OktaAuth/./lib/tx/poll.ts","webpack://OktaAuth/./lib/errors/AuthPollStopError.ts","webpack://OktaAuth/./lib/pkce.ts","webpack://OktaAuth/./lib/browser/features.ts","webpack://OktaAuth/./lib/storageBuilder.ts","webpack://OktaAuth/./lib/errors/OAuthError.ts","webpack://OktaAuth/./lib/types/index.ts","webpack://OktaAuth/./lib/TokenManager.ts","webpack://OktaAuth/./lib/errors/index.ts","webpack://OktaAuth/./lib/browser/browser.ts","webpack://OktaAuth/./node_modules/regenerator-runtime/runtime.js","webpack://OktaAuth/./lib/OktaAuthBase.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/construct.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://OktaAuth/./lib/fetch/fetchRequest.ts","webpack://OktaAuth/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://OktaAuth/./node_modules/js-cookie/src/js.cookie.js","webpack://OktaAuth/./lib/session.ts","webpack://OktaAuth/./lib/token.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://OktaAuth/./lib/crypto.ts","webpack://OktaAuth/./lib/types/Token.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://OktaAuth/./lib/clock.ts","webpack://OktaAuth/./lib/PromiseQueue.ts","webpack://OktaAuth/./lib/browser/fingerprint.ts","webpack://OktaAuth/./lib/AuthStateManager.ts","webpack://OktaAuth/./node_modules/p-cancelable/index.js","webpack://OktaAuth/./node_modules/tiny-emitter/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","instance","Constructor","TypeError","base64ToBase64Url","b64","replace","base64UrlToBase64","b64u","isAbsoluteUrl","url","test","clone","str","JSON","stringify","parse","getNativeConsole","window","console","getConsole","nativeConsole","log","warn","group","groupEnd","deprecate","text","removeTrailingSlash","path","trimmed","btoa","length","utf8","atob","decodeURIComponent","escape","e","buffer","Uint8Array","charCodeAt","fn","ctx","additionalArgs","Array","slice","arguments","args","concat","apply","baseUrl","substring","toString","parts","match","isoTime","Date","UTC","toUTCString","undefined","push","encodeURIComponent","join","randomCharset","random","cl","Math","floor","obj1","objArray","forEach","prop","cleaned","newobj","props","indexOf","collection","searchParams","item","found","linkName","altName","_links","link","document","documentMode","ms","Promise","resolve","setTimeout","finally","AuthSdkError","msg","xhr","errorCode","errorSummary","errorLink","errorId","errorCauses","CustomError","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","httpRequest","sdk","options","method","saveAuthnState","accessToken","withCredentials","storageUtil","storage","httpCache","getHttpCache","cookies","cacheResponse","cachedResponse","getStorage","now","expiresAt","response","headers","userAgent","assign","removeNils","isString","err","res","ajaxOptions","data","httpRequestClient","then","resp","responseText","stateToken","delete","STATE_TOKEN_KEY_NAME","set","updateStorage","DEFAULT_CACHE_DURATION","catch","serverErr","status","transformErrorXHR","AuthApiError","getOptions","getIssuerOrigin","post","postOptions","subClass","superClass","constructor","writable","configurable","_typeof","assertThisInitialized","self","_defineProperties","target","descriptor","protoProps","staticProps","iterator","message","Error","addStateToken","builtArgs","Cookies","require","browserHasLocalStorage","getLocalStorage","testStorage","browserHasSessionStorage","getSessionStorage","getPKCEStorage","preferLocalStorage","PKCE_STORAGE_NAME","getCookieStorage","CACHE_STORAGE_NAME","localStorage","sessionStorage","secure","sameSite","getItem","setItem","getInMemoryStorage","store","removeItem","cookieOptions","expires","remove","ReferenceError","_setPrototypeOf","link2fn","ref","isArray","opts","lk","find","hints","allow","http","href","isPolling","factorType","provider","params","autoPush","reject","omit","rememberDevice","profile","updatePhone","toQueryString","postToTransaction","flattenEmbedded","objArr","ol","embedded","_embedded","isObject","fns","type","poll","getPollFn","links2fns","this","cancel","AuthTransaction","genRandomString","issuer","kid","getWellKnown","wellKnown","jwksUri","cachedKey","keys","clearStorage","claims","validationParams","aud","clientId","iss","nonce","iat","exp","maxClockSkew","authorizeUrl","userinfoUrl","tokenUrl","logoutUrl","revokeUrl","src","iframe","createElement","style","display","body","appendChild","title","popupTitle","appearance","isIE11OrLess","winEl","open","location","hashOrSearch","plus2space","paramSplit","fragment","charAt","param","exec","authParams","pkce","responseType","responseMode","hasCode","hasCodeInUrl","hash","search","uri","redirectUri","isRedirectUri","eventTarget","addEventListener","attachEvent","removeEventListener","detachEvent","authServerUri","_getRequireWildcardCache","WeakMap","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","RegExp","template","sdkValue","isNativeFunction","construct","_wrapNativeSuper","Class","_cache","Map","Wrapper","tx","exists","_get","transactionStep","delay","transactionCallBack","isNumber","DEFAULT_POLLING_DELAY","pollLink","getLink","retryCount","recursivePoll","getStateToken","pollFn","pollRes","factorResult","AuthPollStopError","delayLength","pow","dec2hex","dec","substr","clearMeta","DEFAULT_CODE_CHALLENGE_METHOD","generateVerifier","prefix","a","verifier","MIN_VERIFIER_LENGTH","ceil","crypto","getRandomValues","from","MAX_VERIFIER_LENGTH","saveMeta","meta","codeVerifier","setStorage","loadMeta","computeChallenge","TextEncoder","encode","subtle","digest","arrayBuffer","String","fromCharCode","stringToBase64Url","exchangeCodeForTokens","urls","authorizationCode","interactionCode","validateOptions","code","getPostData","agent","getUserAgent","isWindowsPhone","isIE8or9","postMessage","isTokenVerifySupported","hasTextEncoder","protocol","hostname","navigator","webstorage","storageName","storageString","OAuthError","summary","DEFAULT_OPTIONS","autoRenew","autoRemove","expireEarlySeconds","storageKey","TOKEN_STORAGE_NAME","_storageEventDelay","getExpireTime","tokenMgmtRef","token","hasExpired","clock","emitRenewed","freshToken","oldToken","emitter","emit","emitAdded","emitRemoved","emitError","error","emitEventsForCrossTabsStorageUpdate","newValue","oldValue","oldTokens","getTokensFromStorageValue","newTokens","newToken","clearExpireEventTimeout","clearTimeout","expireTimeouts","renewPromise","clearExpireEventTimeoutAll","setExpireEventTimeout","expireTime","expireEventWait","max","expireEventTimeout","emitExpired","setExpireEventTimeoutAll","tokenStorage","resetExpireEventTimeoutAll","validateToken","scopes","isIDToken","isAccessToken","isRefreshToken","add","features","isLocalhost","getKeyByType","filter","getAsync","getTokens","tokens","idToken","refreshToken","getTokensAsync","setTokens","accessTokenCb","idTokenCb","refreshTokenCb","handleAdded","tokenCb","handleRemoved","idTokenKey","ID_TOKEN_STORAGE_KEY","accessTokenKey","ACCESS_TOKEN_STORAGE_KEY","refreshTokenKey","REFRESH_TOKEN_STORAGE_KEY","existingTokens","removedToken","renew","existingPromise","renewTokens","freshTokens","oldTokenStorage","removedTokens","tokenKey","clear","storageProvider","k","existingValues","valueToStore","SdkClock","on","off","_getStorageKeyByType","_clearExpireEventTimeoutAll","_getOptions","_resetExpireEventTimeoutAll","_emitEventsForCrossTabsStorageUpdate","renewTimeQueue","firstTime","shift","shouldThrottleRenew","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","__rest","getOwnPropertySymbols","propertyIsEnumerable","Emitter","getCookieSettings","cookieSettings","isHTTPS","OktaAuthBrowser","fetchRequest","browserStorage","_pending","handleLogin","toAbsoluteUrl","origin","postLogoutRedirectUri","transformAuthState","restoreOriginalUri","SDK_VERSION","DEFAULT_MAX_CLOCK_SKEW","session","close","closeSession","sessionExists","getSession","refresh","refreshSession","setCookieAndRedirect","_tokenQueue","PromiseQueue","prepareTokenParams","getWithoutPrompt","getWithPopup","getWithRedirect","parseFromUrl","decode","decodeToken","revoke","revokeToken","renewToken","getUserInfo","verify","verifyToken","isLoginRedirect","syncMethods","_setLocation","_getHistory","history","_getLocation","_getDocument","fingerprint","tokenManager","TokenManager","authStateManager","AuthStateManager","signInWithCredentials","_postToTransaction","sendFingerprint","_a","originalUri","additionalParams","setOriginalUri","defaultUri","currentUri","revokeAccessToken","getOAuthUrls","revokeRefreshToken","reload","state","idTokenHint","logoutUri","timeout","authState","getAuthState","isPending","isAuthenticated","unsubscribe","handler","timeoutId","subscribe","updateAuthState","REFERRER_PATH_STORAGE_KEY","handleRedirect","getOriginalUri","removeOriginalUri","storeTokensFromRedirect","hasResponseType","OktaAuthBase","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","context","Context","_invoke","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","assertValidConfig","devMode","ignoreSignature","transactionStatus","resume","resumeTransaction","transactionExists","introspect","PKCE","split","isNativeReflectConstruct","_construct","Parent","Reflect","sham","Proxy","credentials","ok","toLowerCase","json","readData","responseJSON","formatResult","__self__","root","F","fetch","DOMException","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","normalizeValue","iteratorFor","items","Headers","map","append","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","readAsText","chars","readArrayBufferAsText","formData","callback","entries","methods","Request","input","upcased","signal","toUpperCase","referrer","form","trim","bytes","Response","bodyInit","statusText","redirectStatuses","redirect","RangeError","stack","init","request","aborted","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","responseURL","ontimeout","onabort","setRequestHeader","onreadystatechange","readyState","send","polyfill","default","factory","OldCookies","api","noConflict","extend","attributes","converter","defaults","setMilliseconds","getMilliseconds","write","stringifiedAttributes","attributeName","cookie","rdecode","read","getJSON","withConverter","user","sessionToken","redirectUrl","checkAccountSetupComplete","token_type_hint","creds","getToken","tokenParams","requestUrl","buildAuthorizeParams","_addOAuthParamsToStorage","REDIRECT_NONCE_COOKIE_NAME","REDIRECT_STATE_COOKIE_NAME","paramStr","defaultResponseMode","nativeLoc","oauthParamsStr","_getOAuthParamsStrFromStorage","oauthParams","REDIRECT_OAUTH_PARAMS_NAME","urlParamsToObject","nativeHistory","nativeDoc","replaceState","pathname","removeSearch","removeHash","handleOAuthResponse","isToken","refreshTokenObject","client_id","grant_type","scope","refresh_token","renewTokensWithRefresh","accessTokenObject","idTokenObject","userInfo","sub","authenticateHeader","isFunction","getResponseHeader","errorMatches","errorDescriptionMatches","errorDescription","decodedToken","jwt","base64UrlToString","payload","signature","validationOptions","validateClaims","getKey","sdkCrypto","valid","at_hash","getOidcHash","addPostMessageListener","responseHandler","addListener","removeListener","getDefaultTokenParams","getTokenOptions","validateResponse","tokenDict","expiresIn","expires_in","tokenType","token_type","access_token","id_token","accessJwt","Number","idJwt","idTokenObj","generateState","generateNonce","oauthQueryParams","codeChallenge","codeChallengeMethod","idp","idpScope","loginHint","maxAge","prompt","mayBeArray","convertTokenParamsToOAuthParams","iframePromise","iframeEl","loadFrame","contains","parentElement","removeChild","oauthPromise","isPopupPostMessageSupported","windowOptions","windowEl","loadPopup","closePoller","setInterval","closed","clearInterval","isPKCESupported","errorMessage","clonedParams","tokenParamsStr","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","_arr","_n","_d","_e","_s","_i","arrayLikeToArray","minLen","len","arr2","firstHalf","algo","use","importKey","cryptoKey","stringToBuffer","b64Signature","base64UrlDecode","localOffset","parseInt","queue","running","thisObject","run","queueItem","isPromise","isFingerprintSupported","listener","source","PCancelable","DEFAULT_AUTH_STATE","DEFAULT_PENDING","updateAuthStatePromise","canceledTimes","_sdk","_authState","_logOptions","EVENT_ADDED","_setLogOptions","event","EVENT_REMOVED","emitAuthStateChange","prevState","shouldEvaluateIsPending","cancelablePromise","_","onCancel","shouldReject","emitAndResolve","isCanceled","CancelError","reason","executor","_cancelHandlers","_isPending","_isCanceled","_rejectOnCancel","_promise","_reject","defineProperties","boolean","userFn","arguments_","onFulfilled","onRejected","onFinally","E","once","evtArr","evts","liveEvents"],"mappings":"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","file":"okta-auth-js.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global window, document, btoa, atob */\n// converts a string to base64 (url/filename safe variant)\nexport function stringToBase64Url(str) {\n    var b64 = btoa(str);\n    return base64ToBase64Url(b64);\n}\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nexport function base64ToBase64Url(b64) {\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nexport function base64UrlToBase64(b64u) {\n    return b64u.replace(/-/g, '+').replace(/_/g, '/');\n}\nexport function base64UrlToString(b64u) {\n    var b64 = base64UrlToBase64(b64u);\n    switch (b64.length % 4) {\n        case 0:\n            break;\n        case 2:\n            b64 += '==';\n            break;\n        case 3:\n            b64 += '=';\n            break;\n        default:\n            throw 'Not a valid Base64Url';\n    }\n    var utf8 = atob(b64);\n    try {\n        return decodeURIComponent(escape(utf8));\n    }\n    catch (e) {\n        return utf8;\n    }\n}\nexport function stringToBuffer(str) {\n    var buffer = new Uint8Array(str.length);\n    for (var i = 0; i < str.length; i++) {\n        buffer[i] = str.charCodeAt(i);\n    }\n    return buffer;\n}\nexport function base64UrlDecode(str) {\n    return atob(base64UrlToBase64(str));\n}\nexport function bind(fn, ctx) {\n    var additionalArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n        var args = Array.prototype.slice.call(arguments);\n        args = additionalArgs.concat(args);\n        return fn.apply(ctx, args);\n    };\n}\nexport function isAbsoluteUrl(url) {\n    return /^(?:[a-z]+:)?\\/\\//i.test(url);\n}\nexport function toAbsoluteUrl(url = '', baseUrl) {\n    if (isAbsoluteUrl(url)) {\n        return url;\n    }\n    baseUrl = removeTrailingSlash(baseUrl);\n    return url[0] === '/' ? `${baseUrl}${url}` : `${baseUrl}/${url}`;\n}\nexport function toRelativeUrl(url = '', baseUrl) {\n    if (isAbsoluteUrl(url)) {\n        url = url.substring(baseUrl.length);\n    }\n    return url[0] === '/' ? url : `/${url}`;\n}\nexport function isString(obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n}\nexport function isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\nexport function isNumber(obj) {\n    return Object.prototype.toString.call(obj) === '[object Number]';\n}\nexport function isoToUTCString(str) {\n    var parts = str.match(/\\d+/g), isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]), isoDate = new Date(isoTime);\n    return isoDate.toUTCString();\n}\nexport function toQueryString(obj) {\n    var str = [];\n    if (obj !== null) {\n        for (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key) &&\n                obj[key] !== undefined &&\n                obj[key] !== null) {\n                str.push(key + '=' + encodeURIComponent(obj[key]));\n            }\n        }\n    }\n    if (str.length) {\n        return '?' + str.join('&');\n    }\n    else {\n        return '';\n    }\n}\nexport function genRandomString(length) {\n    var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    var random = '';\n    for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n        random += randomCharset[Math.floor(Math.random() * cl)];\n    }\n    return random;\n}\n// TODO: replace all references with `Object.assign` then remove this function\nexport function extend() {\n    // First object will be modified!\n    var obj1 = arguments[0];\n    // Properties from other objects will be copied over\n    var objArray = [].slice.call(arguments, 1);\n    objArray.forEach(function (obj) {\n        for (var prop in obj) {\n            // copy over all properties with defined values\n            if (Object.prototype.hasOwnProperty.call(obj, prop) && obj[prop] !== undefined) {\n                obj1[prop] = obj[prop];\n            }\n        }\n    });\n    return obj1; // return the modified object\n}\nexport function removeNils(obj) {\n    var cleaned = {};\n    for (var prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n            var value = obj[prop];\n            if (value !== null && value !== undefined) {\n                cleaned[prop] = value;\n            }\n        }\n    }\n    return cleaned;\n}\nexport function clone(obj) {\n    if (obj) {\n        var str = JSON.stringify(obj);\n        if (str) {\n            return JSON.parse(str);\n        }\n    }\n    return obj;\n}\n// Analogous to _.omit\nexport function omit(obj, ...props) {\n    // var props = Array.prototype.slice.call(arguments, 1);\n    var newobj = {};\n    for (var p in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, p) && props.indexOf(p) == -1) {\n            newobj[p] = obj[p];\n        }\n    }\n    return clone(newobj);\n}\nexport function find(collection, searchParams) {\n    var c = collection.length;\n    while (c--) {\n        var item = collection[c];\n        var found = true;\n        for (var prop in searchParams) {\n            if (!Object.prototype.hasOwnProperty.call(searchParams, prop)) {\n                continue;\n            }\n            if (item[prop] !== searchParams[prop]) {\n                found = false;\n                break;\n            }\n        }\n        if (found) {\n            return item;\n        }\n    }\n}\nexport function getLink(obj, linkName, altName) {\n    if (!obj || !obj._links) {\n        return;\n    }\n    var link = clone(obj._links[linkName]);\n    // If a link has a name and we have an altName, return if they match\n    if (link && link.name && altName) {\n        if (link.name === altName) {\n            return link;\n        }\n    }\n    else {\n        return link;\n    }\n}\nexport function getNativeConsole() {\n    if (typeof window !== 'undefined') {\n        return window.console;\n    }\n    else if (typeof console !== 'undefined') {\n        return console;\n    }\n    else {\n        return undefined;\n    }\n}\nexport function getConsole() {\n    var nativeConsole = getNativeConsole();\n    if (nativeConsole && nativeConsole.log) {\n        return nativeConsole;\n    }\n    return {\n        log: function () { },\n        warn: function () { },\n        group: function () { },\n        groupEnd: function () { }\n    };\n}\nexport function warn(text) {\n    /* eslint-disable no-console */\n    getConsole().warn('[okta-auth-sdk] WARN: ' + text);\n    /* eslint-enable */\n}\nexport function deprecate(text) {\n    /* eslint-disable no-console */\n    getConsole().warn('[okta-auth-sdk] DEPRECATION: ' + text);\n    /* eslint-enable */\n}\nexport function deprecateWrap(text, fn) {\n    return function () {\n        deprecate(text);\n        return fn.apply(null, arguments);\n    };\n}\nexport function removeTrailingSlash(path) {\n    if (!path) {\n        return;\n    }\n    // Remove any whitespace before or after string\n    var trimmed = path.replace(/^\\s+|\\s+$/gm, '');\n    // Remove trailing slash(es)\n    trimmed = trimmed.replace(/\\/+$/, '');\n    return trimmed;\n}\nexport function isIE11OrLess() {\n    return !!document.documentMode && document.documentMode <= 11;\n}\nexport function isFunction(fn) {\n    return !!fn && {}.toString.call(fn) === '[object Function]';\n}\nexport function delay(ms) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, ms);\n    });\n}\nexport function isPromise(obj) {\n    return obj && obj.finally && (typeof obj.finally === 'function');\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthSdkError extends CustomError {\n    constructor(msg, xhr) {\n        super(msg);\n        this.name = 'AuthSdkError';\n        this.errorCode = 'INTERNAL';\n        this.errorSummary = msg;\n        this.errorLink = 'INTERNAL';\n        this.errorId = 'INTERNAL';\n        this.errorCauses = [];\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity */\nimport { isString, clone, isAbsoluteUrl, removeNils } from './util';\nimport AuthApiError from './errors/AuthApiError';\nimport { STATE_TOKEN_KEY_NAME, DEFAULT_CACHE_DURATION } from './constants';\nfunction httpRequest(sdk, options) {\n    options = options || {};\n    var url = options.url, method = options.method, args = options.args, saveAuthnState = options.saveAuthnState, accessToken = options.accessToken, withCredentials = options.withCredentials !== false, // default value is true\n    storageUtil = sdk.options.storageUtil, storage = storageUtil.storage, httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    if (options.cacheResponse) {\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[url];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            return Promise.resolve(cachedResponse.response);\n        }\n    }\n    var headers = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'X-Okta-User-Agent-Extended': sdk.userAgent\n    };\n    Object.assign(headers, sdk.options.headers, options.headers);\n    headers = removeNils(headers);\n    if (accessToken && isString(accessToken)) {\n        headers['Authorization'] = 'Bearer ' + accessToken;\n    }\n    var ajaxOptions = {\n        headers: headers,\n        data: args || undefined,\n        withCredentials: withCredentials\n    };\n    var err, res;\n    return sdk.options.httpRequestClient(method, url, ajaxOptions)\n        .then(function (resp) {\n        res = resp.responseText;\n        if (res && isString(res)) {\n            res = JSON.parse(res);\n        }\n        if (saveAuthnState) {\n            if (!res.stateToken) {\n                storage.delete(STATE_TOKEN_KEY_NAME);\n            }\n        }\n        if (res && res.stateToken && res.expiresAt) {\n            storage.set(STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt, sdk.options.cookies);\n        }\n        if (res && options.cacheResponse) {\n            httpCache.updateStorage(url, {\n                expiresAt: Math.floor(Date.now() / 1000) + DEFAULT_CACHE_DURATION,\n                response: res\n            });\n        }\n        return res;\n    })\n        .catch(function (resp) {\n        var serverErr = resp.responseText || {};\n        if (isString(serverErr)) {\n            try {\n                serverErr = JSON.parse(serverErr);\n            }\n            catch (e) {\n                serverErr = {\n                    errorSummary: 'Unknown error'\n                };\n            }\n        }\n        if (resp.status >= 500) {\n            serverErr.errorSummary = 'Unknown error';\n        }\n        if (sdk.options.transformErrorXHR) {\n            resp = sdk.options.transformErrorXHR(clone(resp));\n        }\n        err = new AuthApiError(serverErr, resp);\n        if (err.errorCode === 'E0000011') {\n            storage.delete(STATE_TOKEN_KEY_NAME);\n        }\n        throw err;\n    });\n}\nfunction get(sdk, url, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var getOptions = {\n        url: url,\n        method: 'GET'\n    };\n    Object.assign(getOptions, options);\n    return httpRequest(sdk, getOptions);\n}\nfunction post(sdk, url, args, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var postOptions = {\n        url: url,\n        method: 'POST',\n        args: args,\n        saveAuthnState: true\n    };\n    Object.assign(postOptions, options);\n    return httpRequest(sdk, postOptions);\n}\nexport default {\n    get: get,\n    post: post,\n    httpRequest: httpRequest\n};\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport const STATE_TOKEN_KEY_NAME = 'oktaStateToken';\nexport const DEFAULT_POLLING_DELAY = 500;\nexport const DEFAULT_MAX_CLOCK_SKEW = 300;\nexport const DEFAULT_CACHE_DURATION = 86400;\nexport const REDIRECT_OAUTH_PARAMS_NAME = 'okta-oauth-redirect-params';\nexport const REDIRECT_STATE_COOKIE_NAME = 'okta-oauth-state';\nexport const REDIRECT_NONCE_COOKIE_NAME = 'okta-oauth-nonce';\nexport const TOKEN_STORAGE_NAME = 'okta-token-storage';\nexport const CACHE_STORAGE_NAME = 'okta-cache-storage';\nexport const PKCE_STORAGE_NAME = 'okta-pkce-storage';\nexport const ACCESS_TOKEN_STORAGE_KEY = 'accessToken';\nexport const ID_TOKEN_STORAGE_KEY = 'idToken';\nexport const REFRESH_TOKEN_STORAGE_KEY = 'refreshToken';\nexport const REFERRER_PATH_STORAGE_KEY = 'referrerPath';\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nexport const MIN_VERIFIER_LENGTH = 43;\nexport const MAX_VERIFIER_LENGTH = 128;\nexport const DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\n","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class CustomError extends Error {\n    constructor(message) {\n        // https://stackoverflow.com/questions/41102060/typescript-extending-error-class\n        super(message); // 'Error' breaks prototype chain here\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport function addStateToken(res, options) {\n    var builtArgs = {};\n    Object.assign(builtArgs, options);\n    // Add the stateToken if one isn't passed and we have one\n    if (!builtArgs.stateToken && res.stateToken) {\n        builtArgs.stateToken = res.stateToken;\n    }\n    return builtArgs;\n}\nexport function getStateToken(res) {\n    return addStateToken(res);\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport storageBuilder from '../storageBuilder';\nimport { PKCE_STORAGE_NAME, CACHE_STORAGE_NAME } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nconst Cookies = require('js-cookie');\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {\n    // IE11 bug that Microsoft doesn't plan to fix\n    // https://connect.microsoft.com/IE/Feedback/Details/1496040\n    browserHasLocalStorage: function () {\n        try {\n            var storage = storageUtil.getLocalStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    browserHasSessionStorage: function () {\n        try {\n            var storage = storageUtil.getSessionStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    getPKCEStorage: function (options) {\n        options = options || {};\n        if (!options.preferLocalStorage && storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), PKCE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), PKCE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), PKCE_STORAGE_NAME);\n        }\n    },\n    getHttpCache: function (options) {\n        if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), CACHE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), CACHE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), CACHE_STORAGE_NAME);\n        }\n    },\n    getLocalStorage: function () {\n        return localStorage;\n    },\n    getSessionStorage: function () {\n        return sessionStorage;\n    },\n    // Provides webStorage-like interface for cookies\n    getCookieStorage: function (options) {\n        const secure = options.secure;\n        const sameSite = options.sameSite;\n        if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n            throw new AuthSdkError('getCookieStorage: \"secure\" and \"sameSite\" options must be provided');\n        }\n        return {\n            getItem: storageUtil.storage.get,\n            setItem: function (key, value) {\n                // Cookie shouldn't expire\n                storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n                    secure: secure,\n                    sameSite: sameSite\n                });\n            }\n        };\n    },\n    // Provides an in-memory solution\n    getInMemoryStorage: function () {\n        var store = {};\n        return {\n            getItem: function (key) {\n                return store[key];\n            },\n            setItem: function (key, value) {\n                store[key] = value;\n            }\n        };\n    },\n    testStorage: function (storage) {\n        var key = 'okta-test-storage';\n        try {\n            storage.setItem(key, key);\n            storage.removeItem(key);\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    storage: {\n        set: function (name, value, expiresAt, options) {\n            const secure = options.secure;\n            const sameSite = options.sameSite;\n            if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n                throw new AuthSdkError('storage.set: \"secure\" and \"sameSite\" options must be provided');\n            }\n            var cookieOptions = {\n                path: options.path || '/',\n                secure,\n                sameSite\n            };\n            // eslint-disable-next-line no-extra-boolean-cast\n            if (!!(Date.parse(expiresAt))) {\n                // Expires value can be converted to a Date object.\n                //\n                // If the 'expiresAt' value is not provided, or the value cannot be\n                // parsed as a Date object, the cookie will set as a session cookie.\n                cookieOptions.expires = new Date(expiresAt);\n            }\n            Cookies.set(name, value, cookieOptions);\n            return storageUtil.storage.get(name);\n        },\n        get: function (name) {\n            return Cookies.get(name);\n        },\n        delete: function (name) {\n            return Cookies.remove(name, { path: '/' });\n        }\n    }\n};\nexport default storageUtil;\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { find, omit, toQueryString, clone, isObject } from '../util';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { addStateToken } from './util';\nimport { getPollFn } from './poll';\nimport { postToTransaction } from './api';\nexport class AuthTransaction {\n    constructor(sdk, res = null) {\n        if (res) {\n            this.data = res;\n            Object.assign(this, flattenEmbedded(sdk, res, res, {}));\n            delete this.stateToken;\n            // RECOVERY_CHALLENGE has some responses without _links.\n            // Without _links, we emulate cancel to make it intuitive\n            // to return to the starting state. We may remove this\n            // when OKTA-75434 is resolved\n            if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n                this.cancel = function () {\n                    return Promise.resolve(new AuthTransaction(sdk));\n                };\n            }\n        }\n    }\n}\nfunction link2fn(sdk, res, obj, link, ref) {\n    if (Array.isArray(link)) {\n        return function (name, opts) {\n            if (!name) {\n                throw new AuthSdkError('Must provide a link name');\n            }\n            var lk = find(link, { name: name });\n            if (!lk) {\n                throw new AuthSdkError('No link found for that name');\n            }\n            return link2fn(sdk, res, obj, lk, ref)(opts);\n        };\n    }\n    else if (link.hints &&\n        link.hints.allow &&\n        link.hints.allow.length === 1) {\n        var method = link.hints.allow[0];\n        switch (method) {\n            case 'GET':\n                return function () {\n                    return http.get(sdk, link.href);\n                };\n            case 'POST':\n                // eslint-disable-next-line max-statements,complexity\n                return function (opts) {\n                    if (ref && ref.isPolling) {\n                        ref.isPolling = false;\n                    }\n                    var data = addStateToken(res, opts);\n                    if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n                        // Add factorType and provider\n                        Object.assign(data, {\n                            factorType: obj.factorType,\n                            provider: obj.provider\n                        });\n                    }\n                    var params = {};\n                    var autoPush = data.autoPush;\n                    if (autoPush !== undefined) {\n                        if (typeof autoPush === 'function') {\n                            try {\n                                params.autoPush = !!autoPush();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                            }\n                        }\n                        else if (autoPush !== null) {\n                            params.autoPush = !!autoPush;\n                        }\n                        data = omit(data, 'autoPush');\n                    }\n                    var rememberDevice = data.rememberDevice;\n                    if (rememberDevice !== undefined) {\n                        if (typeof rememberDevice === 'function') {\n                            try {\n                                params.rememberDevice = !!rememberDevice();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                            }\n                        }\n                        else if (rememberDevice !== null) {\n                            params.rememberDevice = !!rememberDevice;\n                        }\n                        data = omit(data, 'rememberDevice');\n                    }\n                    else if (data.profile &&\n                        data.profile.updatePhone !== undefined) {\n                        if (data.profile.updatePhone) {\n                            params.updatePhone = true;\n                        }\n                        data.profile = omit(data.profile, 'updatePhone');\n                    }\n                    var href = link.href + toQueryString(params);\n                    return postToTransaction(sdk, href, data);\n                };\n        }\n    }\n}\nfunction links2fns(sdk, res, obj, ref) {\n    var fns = {};\n    for (var linkName in obj._links) {\n        if (!Object.prototype.hasOwnProperty.call(obj._links, linkName)) {\n            continue;\n        }\n        var link = obj._links[linkName];\n        if (linkName === 'next') {\n            linkName = link.name;\n        }\n        if (link.type) {\n            fns[linkName] = link;\n            continue;\n        }\n        switch (linkName) {\n            // poll is only found at the transaction\n            // level, so we don't need to pass the link\n            case 'poll':\n                fns.poll = getPollFn(sdk, res, ref);\n                break;\n            default:\n                var fn = link2fn(sdk, res, obj, link, ref);\n                if (fn) {\n                    fns[linkName] = fn;\n                }\n        }\n    }\n    return fns;\n}\n// eslint-disable-next-line complexity\nfunction flattenEmbedded(sdk, res, obj, ref) {\n    obj = obj || res;\n    obj = clone(obj);\n    if (Array.isArray(obj)) {\n        var objArr = [];\n        for (var o = 0, ol = obj.length; o < ol; o++) {\n            objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n        }\n        return objArr;\n    }\n    var embedded = obj._embedded || {};\n    for (var key in embedded) {\n        if (!Object.prototype.hasOwnProperty.call(embedded, key)) {\n            continue;\n        }\n        // Flatten any nested _embedded objects\n        if (isObject(embedded[key]) || Array.isArray(embedded[key])) {\n            embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n        }\n    }\n    // Convert any links on the embedded object\n    var fns = links2fns(sdk, res, obj, ref);\n    Object.assign(embedded, fns);\n    obj = omit(obj, '_embedded', '_links');\n    Object.assign(obj, embedded);\n    return obj;\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, document */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { genRandomString, isIE11OrLess, find, removeTrailingSlash } from './util';\nimport storageUtil from './browser/browserStorage';\nimport AuthSdkError from './errors/AuthSdkError';\nfunction generateState() {\n    return genRandomString(64);\n}\nfunction generateNonce() {\n    return genRandomString(64);\n}\nfunction addListener(eventTarget, name, fn) {\n    if (eventTarget.addEventListener) {\n        eventTarget.addEventListener(name, fn);\n    }\n    else {\n        eventTarget.attachEvent('on' + name, fn);\n    }\n}\nfunction removeListener(eventTarget, name, fn) {\n    if (eventTarget.removeEventListener) {\n        eventTarget.removeEventListener(name, fn);\n    }\n    else {\n        eventTarget.detachEvent('on' + name, fn);\n    }\n}\nfunction loadFrame(src) {\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.src = src;\n    return document.body.appendChild(iframe);\n}\nfunction loadPopup(src, options) {\n    var title = options.popupTitle || 'External Identity Provider User Authentication';\n    var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n        'top=100, left=500, width=600, height=600';\n    if (isIE11OrLess()) {\n        // IE<=11 doesn't fully support postMessage at time of writting.\n        // the following simple solution happened to solve the issue\n        // without adding another proxy layer which makes flow more complecated.\n        var winEl = window.open('/', title, appearance);\n        winEl.location.href = src;\n        return winEl;\n    }\n    else {\n        return window.open(src, title, appearance);\n    }\n}\nfunction getWellKnown(sdk, issuer) {\n    var authServerUri = (issuer || sdk.options.issuer);\n    return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n        cacheResponse: true\n    });\n}\nfunction getKey(sdk, issuer, kid) {\n    var httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    return getWellKnown(sdk, issuer)\n        .then(function (wellKnown) {\n        var jwksUri = wellKnown['jwks_uri'];\n        // Check our kid against the cached version (if it exists and isn't expired)\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[jwksUri];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            var cachedKey = find(cachedResponse.response.keys, {\n                kid: kid\n            });\n            if (cachedKey) {\n                return cachedKey;\n            }\n        }\n        // Remove cache for the key\n        httpCache.clearStorage(jwksUri);\n        // Pull the latest keys if the key wasn't in the cache\n        return http.get(sdk, jwksUri, {\n            cacheResponse: true\n        })\n            .then(function (res) {\n            var key = find(res.keys, {\n                kid: kid\n            });\n            if (key) {\n                return key;\n            }\n            throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n        });\n    });\n}\nfunction validateClaims(sdk, claims, validationParams) {\n    var aud = validationParams.clientId;\n    var iss = validationParams.issuer;\n    var nonce = validationParams.nonce;\n    if (!claims || !iss || !aud) {\n        throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n    }\n    if (nonce && claims.nonce !== nonce) {\n        throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n    }\n    var now = Math.floor(Date.now() / 1000);\n    if (claims.iss !== iss) {\n        throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n            'does not match [' + iss + ']');\n    }\n    if (claims.aud !== aud) {\n        throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n            'does not match [' + aud + ']');\n    }\n    if (claims.iat > claims.exp) {\n        throw new AuthSdkError('The JWT expired before it was issued');\n    }\n    if ((now - sdk.options.maxClockSkew) > claims.exp) {\n        throw new AuthSdkError('The JWT expired and is no longer valid');\n    }\n    if (claims.iat > (now + sdk.options.maxClockSkew)) {\n        throw new AuthSdkError('The JWT was issued in the future');\n    }\n}\nfunction getOAuthUrls(sdk, options) {\n    if (arguments.length > 2) {\n        throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n    }\n    options = options || {};\n    // Get user-supplied arguments\n    var authorizeUrl = removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n    var issuer = removeTrailingSlash(options.issuer) || sdk.options.issuer;\n    var userinfoUrl = removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n    var tokenUrl = removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n    var logoutUrl = removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n    var revokeUrl = removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n    var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n    authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n    userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n    tokenUrl = tokenUrl || baseUrl + '/v1/token';\n    revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n    logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n    return {\n        issuer: issuer,\n        authorizeUrl: authorizeUrl,\n        userinfoUrl: userinfoUrl,\n        tokenUrl: tokenUrl,\n        revokeUrl: revokeUrl,\n        logoutUrl: logoutUrl\n    };\n}\nfunction urlParamsToObject(hashOrSearch) {\n    // Predefine regexs for parsing hash\n    var plus2space = /\\+/g;\n    var paramSplit = /([^&=]+)=?([^&]*)/g;\n    var fragment = hashOrSearch;\n    // Some hash based routers will automatically add a / character after the hash\n    if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n        fragment = fragment.substring(2);\n    }\n    // Remove the leading # or ?\n    if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n        fragment = fragment.substring(1);\n    }\n    var obj = {};\n    // Loop until we have no more params\n    var param;\n    while (true) { // eslint-disable-line no-constant-condition\n        param = paramSplit.exec(fragment);\n        if (!param) {\n            break;\n        }\n        var key = param[1];\n        var value = param[2];\n        // id_token should remain base64url encoded\n        if (key === 'id_token' || key === 'access_token' || key === 'code') {\n            obj[key] = value;\n        }\n        else {\n            obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n        }\n    }\n    return obj;\n}\nfunction hasTokensInHash(hash) {\n    return /((id|access)_token=)/i.test(hash);\n}\nfunction hasCodeInUrl(hashOrSearch) {\n    return /(code=)/i.test(hashOrSearch);\n}\nfunction isRedirectUri(uri, sdk) {\n    var authParams = sdk.options;\n    return uri && uri.indexOf(authParams.redirectUri) == 0;\n}\n/**\n * Check if tokens or a code have been passed back into the url, which happens in\n * the social auth IDP redirect flow.\n */\nfunction isLoginRedirect(sdk) {\n    var authParams = sdk.options;\n    if (authParams.pkce || authParams.responseType === 'code' || authParams.responseMode === 'query') {\n        // Look for code\n        var hasCode = authParams.responseMode === 'fragment' ?\n            hasCodeInUrl(window.location.hash) :\n            hasCodeInUrl(window.location.search);\n        return isRedirectUri(window.location.href, sdk) && hasCode;\n    }\n    // Look for tokens (Implicit OIDC flow)\n    return hasTokensInHash(window.location.hash);\n}\nexport { generateState, generateNonce, getWellKnown, getKey, validateClaims, getOAuthUrls, loadFrame, loadPopup, urlParamsToObject, isLoginRedirect, addListener, removeListener };\n","var _typeof = require(\"../helpers/typeof\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","module.exports = require(\"regenerator-runtime\");\n","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// TODO: use @okta/configuration-validation (move module to this monorepo?)\n// eslint-disable-next-line complexity\nfunction assertValidConfig(args) {\n    args = args || {};\n    var issuer = args.issuer;\n    if (!issuer) {\n        throw new AuthSdkError('No issuer passed to constructor. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    var isUrlRegex = new RegExp('^http?s?://.+');\n    if (!isUrlRegex.test(args.issuer)) {\n        throw new AuthSdkError('Issuer must be a valid URL. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    if (issuer.indexOf('-admin.') !== -1) {\n        throw new AuthSdkError('Issuer URL passed to constructor contains \"-admin\" in subdomain. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com})');\n    }\n    var userAgent = args.userAgent;\n    var userAgentTemplateWithNoPlaceholder = userAgent && userAgent.template && userAgent.template.indexOf('$OKTA_AUTH_JS') === -1;\n    if (userAgentTemplateWithNoPlaceholder) {\n        throw new AuthSdkError('UserAgentTemplate must include \"$OKTA_AUTH_JS\" placeholder. ' +\n            'Required usage: new OktaAuth({userAgentTemplate: \"xxx $OKTA_AUTH_JS xxx\"})');\n    }\n}\nfunction getUserAgent(args, sdkValue) {\n    var userAgent = args.userAgent || {};\n    if (userAgent.value) {\n        return userAgent.value;\n    }\n    if (userAgent.template) {\n        return userAgent.template.replace('$OKTA_AUTH_JS', sdkValue);\n    }\n    return sdkValue;\n}\nexport { assertValidConfig, getUserAgent };\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport * from './api';\nexport * from './AuthTransaction';\nexport * from './poll';\nexport * from './TransactionState';\nexport * from './util';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity, max-statements */\nimport http from '../http';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { STATE_TOKEN_KEY_NAME } from '../constants';\nimport { addStateToken } from './util';\nimport { AuthTransaction } from './AuthTransaction';\nfunction transactionStatus(sdk, args) {\n    args = addStateToken(sdk, args);\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args);\n}\nfunction resumeTransaction(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to resume'));\n        }\n    }\n    return sdk.tx.status(args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction introspect(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n        }\n    }\n    return transactionStep(sdk, args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction transactionStep(sdk, args) {\n    args = addStateToken(sdk, args);\n    // v1 pipeline introspect API\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args);\n}\nfunction transactionExists(sdk) {\n    // We have a cookie state token\n    return !!sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n}\nfunction postToTransaction(sdk, url, args, options) {\n    return http.post(sdk, url, args, options)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nexport { transactionStatus, resumeTransaction, transactionExists, postToTransaction, introspect, };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthApiError extends CustomError {\n    constructor(err, xhr) {\n        const message = err.errorSummary;\n        super(message);\n        this.name = 'AuthApiError';\n        this.errorSummary = err.errorSummary;\n        this.errorCode = err.errorCode;\n        this.errorLink = err.errorLink;\n        this.errorId = err.errorId;\n        this.errorCauses = err.errorCauses;\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { isNumber, isObject, getLink, toQueryString, delay as delayFn } from '../util';\nimport { DEFAULT_POLLING_DELAY } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport AuthPollStopError from '../errors/AuthPollStopError';\nimport { AuthTransaction } from './AuthTransaction';\nimport { getStateToken } from './util';\nexport function getPollFn(sdk, res, ref) {\n    return function (options) {\n        var delay;\n        var rememberDevice;\n        var autoPush;\n        var transactionCallBack;\n        if (isNumber(options)) {\n            delay = options;\n        }\n        else if (isObject(options)) {\n            options = options;\n            delay = options.delay;\n            rememberDevice = options.rememberDevice;\n            autoPush = options.autoPush;\n            transactionCallBack = options.transactionCallBack;\n        }\n        if (!delay && delay !== 0) {\n            delay = DEFAULT_POLLING_DELAY;\n        }\n        // Get the poll function\n        var pollLink = getLink(res, 'next', 'poll');\n        // eslint-disable-next-line complexity\n        function pollFn() {\n            var opts = {};\n            if (typeof autoPush === 'function') {\n                try {\n                    opts.autoPush = !!autoPush();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                }\n            }\n            else if (autoPush !== undefined && autoPush !== null) {\n                opts.autoPush = !!autoPush;\n            }\n            if (typeof rememberDevice === 'function') {\n                try {\n                    opts.rememberDevice = !!rememberDevice();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                }\n            }\n            else if (rememberDevice !== undefined && rememberDevice !== null) {\n                opts.rememberDevice = !!rememberDevice;\n            }\n            var href = pollLink.href + toQueryString(opts);\n            return http.post(sdk, href, getStateToken(res), {\n                saveAuthnState: false\n            });\n        }\n        ref.isPolling = true;\n        var retryCount = 0;\n        var recursivePoll = function () {\n            // If the poll was manually stopped during the delay\n            if (!ref.isPolling) {\n                return Promise.reject(new AuthPollStopError());\n            }\n            return pollFn()\n                .then(function (pollRes) {\n                // Reset our retry counter on success\n                retryCount = 0;\n                // If we're still waiting\n                if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n                    // If the poll was manually stopped while the pollFn was called\n                    if (!ref.isPolling) {\n                        throw new AuthPollStopError();\n                    }\n                    if (typeof transactionCallBack === 'function') {\n                        transactionCallBack(pollRes);\n                    }\n                    // Continue poll\n                    return delayFn(delay).then(recursivePoll);\n                }\n                else {\n                    // Any non-waiting result, even if polling was stopped\n                    // during a request, will return\n                    ref.isPolling = false;\n                    return new AuthTransaction(sdk, pollRes);\n                }\n            })\n                .catch(function (err) {\n                // Exponential backoff, up to 16 seconds\n                if (err.xhr &&\n                    (err.xhr.status === 0 || err.xhr.status === 429) &&\n                    retryCount <= 4) {\n                    var delayLength = Math.pow(2, retryCount) * 1000;\n                    retryCount++;\n                    return delayFn(delayLength)\n                        .then(recursivePoll);\n                }\n                throw err;\n            });\n        };\n        return recursivePoll()\n            .catch(function (err) {\n            ref.isPolling = false;\n            throw err;\n        });\n    };\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthPollStopError extends CustomError {\n    constructor() {\n        const message = 'The poll was stopped by the sdk';\n        super(message);\n    }\n}\n","/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global crypto */\n/* eslint-disable complexity, max-statements */\nimport AuthSdkError from './errors/AuthSdkError';\nimport http from './http';\nimport { warn, stringToBase64Url, removeNils, toQueryString } from './util';\nimport { MIN_VERIFIER_LENGTH, MAX_VERIFIER_LENGTH, DEFAULT_CODE_CHALLENGE_METHOD } from './constants';\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\nfunction getRandomString(length) {\n    var a = new Uint8Array(Math.ceil(length / 2));\n    crypto.getRandomValues(a);\n    var str = Array.from(a, dec2hex).join('');\n    return str.slice(0, length);\n}\nfunction generateVerifier(prefix) {\n    var verifier = prefix || '';\n    if (verifier.length < MIN_VERIFIER_LENGTH) {\n        verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n    }\n    return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\nfunction getStorage(sdk, options) {\n    options = Object.assign({}, sdk.options.cookies, options);\n    return sdk.options.storageUtil.getPKCEStorage(options);\n}\nfunction saveMeta(sdk, meta) {\n    // There must be only one PKCE flow executing at a time.\n    // Before saving meta, check to see if a codeVerfier is already stored.\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in localStorage. This may indicate an auth flow is already in progress.');\n    }\n    storage = getStorage(sdk);\n    obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in sessionStorage. This may indicate an auth flow is already in progress.');\n    }\n    // clear all PKCE meta storage before saving.\n    clearMeta(sdk);\n    storage.setStorage(meta);\n}\nfunction loadMeta(sdk) {\n    // Try reading from localStorage first.\n    // This is for compatibility with older versions of the signin widget. OKTA-304806\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    // Verify the Meta\n    if (!obj.codeVerifier) {\n        // If meta is not valid, read from sessionStorage. This is expected for current versions of the SDK.\n        storage = getStorage(sdk, { preferLocalStorage: false });\n        obj = storage.getStorage();\n        if (!obj.codeVerifier) {\n            // If meta is not valid, throw an exception to avoid misleading server-side error\n            // The most likely cause of this error is trying to handle a callback twice\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.', null);\n        }\n    }\n    return obj;\n}\nfunction clearMeta(sdk) {\n    // clear sessionStorage (current version)\n    var storage = getStorage(sdk);\n    storage.clearStorage();\n    // clear localStorage (previous versions, signin widget)\n    storage = getStorage(sdk, { preferLocalStorage: true });\n    storage.clearStorage();\n}\nfunction computeChallenge(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction validateOptions(options) {\n    // Quick validation\n    if (!options.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (!options.redirectUri) {\n        throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n    }\n    if (!options.authorizationCode && !options.interactionCode) {\n        throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n    }\n    if (!options.codeVerifier) {\n        throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n    }\n}\nfunction getPostData(options) {\n    // Convert Token params to OAuth params, sent to the /token endpoint\n    var params = removeNils({\n        'client_id': options.clientId,\n        'redirect_uri': options.redirectUri,\n        'grant_type': options.interactionCode ? 'interaction_code' : 'authorization_code',\n        'code_verifier': options.codeVerifier\n    });\n    if (options.interactionCode) {\n        params['interaction_code'] = options.interactionCode;\n    }\n    else if (options.authorizationCode) {\n        params.code = options.authorizationCode;\n    }\n    // Encode as URL string\n    return toQueryString(params).slice(1);\n}\n// exchange authorization code for an access token\nfunction exchangeCodeForTokens(sdk, options, urls) {\n    validateOptions(options);\n    var data = getPostData(options);\n    return http.httpRequest(sdk, {\n        url: urls.tokenUrl,\n        method: 'POST',\n        args: data,\n        withCredentials: false,\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        }\n    });\n}\nexport default {\n    DEFAULT_CODE_CHALLENGE_METHOD,\n    generateVerifier,\n    clearMeta,\n    saveMeta,\n    loadMeta,\n    computeChallenge,\n    exchangeCodeForTokens\n};\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nconst isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\nexport function getUserAgent() {\n    return navigator.userAgent;\n}\nexport function isFingerprintSupported() {\n    const agent = getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n}\nexport function isPopupPostMessageSupported() {\n    var isIE8or9 = document.documentMode && document.documentMode < 10;\n    if (window.postMessage && !isIE8or9) {\n        return true;\n    }\n    return false;\n}\nexport function isTokenVerifySupported() {\n    return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n}\nexport function hasTextEncoder() {\n    return typeof TextEncoder !== 'undefined';\n}\nexport function isPKCESupported() {\n    return isTokenVerifySupported() && hasTextEncoder();\n}\nexport function isHTTPS() {\n    return window.location.protocol === 'https:';\n}\nexport function isLocalhost() {\n    return window.location.hostname === 'localhost';\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n    if (typeof storageName !== 'string' || !storageName.length) {\n        throw new AuthSdkError('\"storageName\" is required');\n    }\n    function getStorage() {\n        var storageString = webstorage.getItem(storageName);\n        storageString = storageString || '{}';\n        try {\n            return JSON.parse(storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n        }\n    }\n    function setStorage(storage) {\n        try {\n            var storageString = JSON.stringify(storage);\n            webstorage.setItem(storageName, storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to set storage: ' + storageName);\n        }\n    }\n    function clearStorage(key) {\n        if (!key) {\n            return setStorage({});\n        }\n        var storage = getStorage();\n        delete storage[key];\n        setStorage(storage);\n    }\n    function updateStorage(key, value) {\n        var storage = getStorage();\n        storage[key] = value;\n        setStorage(storage);\n    }\n    return {\n        getStorage: getStorage,\n        setStorage: setStorage,\n        clearStorage: clearStorage,\n        updateStorage: updateStorage\n    };\n}\nexport default storageBuilder;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class OAuthError extends CustomError {\n    constructor(errorCode, summary) {\n        super(summary);\n        this.name = 'OAuthError';\n        this.errorCode = errorCode;\n        this.errorSummary = summary;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport * from './api';\nexport * from './Cookies';\nexport * from './http';\nexport * from './JWT';\nexport * from './OAuth';\nexport * from './OktaAuthOptions';\nexport * from './Storage';\nexport * from './Token';\nexport * from './UserClaims';\nexport * from './AuthState';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, localStorage, sessionStorage */\n/* eslint complexity:[0,8] max-statements:[0,21] */\nimport { removeNils, warn, isObject, clone, isIE11OrLess } from './util';\nimport AuthSdkError from './errors/AuthSdkError';\nimport storageUtil from './browser/browserStorage';\nimport { TOKEN_STORAGE_NAME } from './constants';\nimport storageBuilder from './storageBuilder';\nimport SdkClock from './clock';\nimport { isIDToken, isAccessToken, isRefreshToken } from './types';\nimport { ID_TOKEN_STORAGE_KEY, ACCESS_TOKEN_STORAGE_KEY, REFRESH_TOKEN_STORAGE_KEY } from './constants';\nconst DEFAULT_OPTIONS = {\n    autoRenew: true,\n    autoRemove: true,\n    storage: 'localStorage',\n    expireEarlySeconds: 30,\n    storageKey: TOKEN_STORAGE_NAME,\n    _storageEventDelay: 0\n};\nexport const EVENT_EXPIRED = 'expired';\nexport const EVENT_RENEWED = 'renewed';\nexport const EVENT_ADDED = 'added';\nexport const EVENT_REMOVED = 'removed';\nexport const EVENT_ERROR = 'error';\nfunction getExpireTime(tokenMgmtRef, token) {\n    var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n    return expireTime;\n}\nfunction hasExpired(tokenMgmtRef, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    return expireTime <= tokenMgmtRef.clock.now();\n}\nfunction emitExpired(tokenMgmtRef, key, token) {\n    tokenMgmtRef.emitter.emit(EVENT_EXPIRED, key, token);\n}\nfunction emitRenewed(tokenMgmtRef, key, freshToken, oldToken) {\n    tokenMgmtRef.emitter.emit(EVENT_RENEWED, key, freshToken, oldToken);\n}\nfunction emitAdded(tokenMgmtRef, key, token) {\n    tokenMgmtRef.emitter.emit(EVENT_ADDED, key, token);\n}\nfunction emitRemoved(tokenMgmtRef, key, token) {\n    tokenMgmtRef.emitter.emit(EVENT_REMOVED, key, token);\n}\nfunction emitError(tokenMgmtRef, error) {\n    tokenMgmtRef.emitter.emit(EVENT_ERROR, error);\n}\nfunction emitEventsForCrossTabsStorageUpdate(tokenMgmtRef, newValue, oldValue) {\n    const oldTokens = getTokensFromStorageValue(oldValue);\n    const newTokens = getTokensFromStorageValue(newValue);\n    Object.keys(newTokens).forEach(key => {\n        const oldToken = oldTokens[key];\n        const newToken = newTokens[key];\n        if (JSON.stringify(oldToken) !== JSON.stringify(newToken)) {\n            emitAdded(tokenMgmtRef, key, newToken);\n        }\n    });\n    Object.keys(oldTokens).forEach(key => {\n        const oldToken = oldTokens[key];\n        const newToken = newTokens[key];\n        if (!newToken) {\n            emitRemoved(tokenMgmtRef, key, oldToken);\n        }\n    });\n}\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n    clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n    delete tokenMgmtRef.expireTimeouts[key];\n    // Remove the renew promise (if it exists)\n    delete tokenMgmtRef.renewPromise[key];\n}\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n    var expireTimeouts = tokenMgmtRef.expireTimeouts;\n    for (var key in expireTimeouts) {\n        if (!Object.prototype.hasOwnProperty.call(expireTimeouts, key)) {\n            continue;\n        }\n        clearExpireEventTimeout(tokenMgmtRef, key);\n    }\n}\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n    // Clear any existing timeout\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    var expireEventTimeout = setTimeout(function () {\n        emitExpired(tokenMgmtRef, key, token);\n    }, expireEventWait);\n    // Add a new timeout\n    tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n    try {\n        var tokenStorage = storage.getStorage();\n    }\n    catch (e) {\n        // Any errors thrown on instantiation will not be caught,\n        // because there are no listeners yet\n        emitError(tokenMgmtRef, e);\n        return;\n    }\n    for (var key in tokenStorage) {\n        if (!Object.prototype.hasOwnProperty.call(tokenStorage, key)) {\n            continue;\n        }\n        var token = tokenStorage[key];\n        setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n    }\n}\n// reset timeouts to setup autoRenew for tokens from other document context (tabs)\nfunction resetExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n    clearExpireEventTimeoutAll(tokenMgmtRef);\n    setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n}\nfunction validateToken(token) {\n    if (!isObject(token) ||\n        !token.scopes ||\n        (!token.expiresAt && token.expiresAt !== 0) ||\n        (!isIDToken(token) && !isAccessToken(token) && !isRefreshToken(token))) {\n        throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and one of: an idToken, accessToken, or refreshToken property');\n    }\n}\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n    if (sdk.features.isLocalhost()) {\n        warn('Use setTokens() instead if you want to add a set of tokens at same time.\\n' +\n            'It prevents current tab from emitting unnecessary StorageEvent,\\n' +\n            'which may cause false-positive authState change cross tabs.');\n    }\n    var tokenStorage = storage.getStorage();\n    validateToken(token);\n    tokenStorage[key] = token;\n    storage.setStorage(tokenStorage);\n    emitAdded(tokenMgmtRef, key, token);\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\nfunction get(storage, key) {\n    var tokenStorage = storage.getStorage();\n    return tokenStorage[key];\n}\nfunction getKeyByType(storage, type) {\n    const tokenStorage = storage.getStorage();\n    const key = Object.keys(tokenStorage).filter(key => {\n        const token = tokenStorage[key];\n        return (isAccessToken(token) && type === 'accessToken')\n            || (isIDToken(token) && type === 'idToken')\n            || (isRefreshToken(token) && type === 'refreshToken');\n    })[0];\n    return key;\n}\nfunction getAsync(storage, key) {\n    return new Promise(function (resolve) {\n        var token = get(storage, key);\n        return resolve(token);\n    });\n}\nfunction getTokens(storage) {\n    const tokens = {};\n    const tokenStorage = storage.getStorage();\n    Object.keys(tokenStorage).forEach(key => {\n        const token = tokenStorage[key];\n        if (isAccessToken(token)) {\n            tokens.accessToken = token;\n        }\n        else if (isIDToken(token)) {\n            tokens.idToken = token;\n        }\n        else if (isRefreshToken(token)) {\n            tokens.refreshToken = token;\n        }\n    });\n    return tokens;\n}\nfunction getTokensAsync(storage) {\n    return new Promise((resolve) => {\n        const tokens = getTokens(storage);\n        return resolve(tokens);\n    });\n}\n/* eslint-disable max-params */\nfunction setTokens(sdk, tokenMgmtRef, storage, { accessToken, idToken, refreshToken }, accessTokenCb, idTokenCb, refreshTokenCb) {\n    const handleAdded = (key, token, tokenCb) => {\n        emitAdded(tokenMgmtRef, key, token);\n        setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n        if (tokenCb) {\n            tokenCb(key, token);\n        }\n    };\n    const handleRemoved = (key, token, tokenCb) => {\n        clearExpireEventTimeout(tokenMgmtRef, key);\n        emitRemoved(tokenMgmtRef, key, token);\n        if (tokenCb) {\n            tokenCb(key, token);\n        }\n    };\n    if (idToken) {\n        validateToken(idToken);\n    }\n    if (accessToken) {\n        validateToken(accessToken);\n    }\n    const idTokenKey = getKeyByType(storage, 'idToken') || ID_TOKEN_STORAGE_KEY;\n    const accessTokenKey = getKeyByType(storage, 'accessToken') || ACCESS_TOKEN_STORAGE_KEY;\n    const refreshTokenKey = getKeyByType(storage, 'refreshToken') || REFRESH_TOKEN_STORAGE_KEY;\n    // add token to storage\n    const tokenStorage = Object.assign(Object.assign(Object.assign({}, (idToken && { [idTokenKey]: idToken })), (accessToken && { [accessTokenKey]: accessToken })), (refreshToken && { [refreshTokenKey]: refreshToken }));\n    storage.setStorage(tokenStorage);\n    // emit event and start expiration timer\n    const existingTokens = getTokens(storage);\n    if (idToken) {\n        handleAdded(idTokenKey, idToken, idTokenCb);\n    }\n    else if (existingTokens.idToken) {\n        handleRemoved(idTokenKey, existingTokens.idToken, idTokenCb);\n    }\n    if (accessToken) {\n        handleAdded(accessTokenKey, accessToken, accessTokenCb);\n    }\n    else if (existingTokens.accessToken) {\n        handleRemoved(accessTokenKey, existingTokens.accessToken, accessTokenCb);\n    }\n    if (refreshToken) {\n        handleAdded(refreshTokenKey, refreshToken, refreshTokenCb);\n    }\n    else if (existingTokens.refreshToken) {\n        handleRemoved(refreshTokenKey, existingTokens.refreshToken, refreshTokenCb);\n    }\n}\n/* eslint-enable max-params */\nfunction remove(tokenMgmtRef, storage, key) {\n    // Clear any listener for this token\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    var tokenStorage = storage.getStorage();\n    var removedToken = tokenStorage[key];\n    delete tokenStorage[key];\n    storage.setStorage(tokenStorage);\n    emitRemoved(tokenMgmtRef, key, removedToken);\n}\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n    // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n    var existingPromise = tokenMgmtRef.renewPromise[key];\n    if (existingPromise) {\n        return existingPromise;\n    }\n    try {\n        var token = get(storage, key);\n        if (!token) {\n            throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n        }\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Remove existing autoRenew timeouts\n    clearExpireEventTimeoutAll(tokenMgmtRef);\n    // A refresh token means a replace instead of renewal\n    // Store the renew promise state, to avoid renewing again\n    // Renew/refresh all tokens in one process\n    tokenMgmtRef.renewPromise[key] = sdk.token.renewTokens({\n        scopes: token.scopes,\n    })\n        .then(function (freshTokens) {\n        // store and emit events for freshTokens\n        const oldTokenStorage = storage.getStorage();\n        setTokens(sdk, tokenMgmtRef, storage, freshTokens, (accessTokenKey, accessToken) => emitRenewed(tokenMgmtRef, accessTokenKey, accessToken, oldTokenStorage[accessTokenKey]), (idTokenKey, idToken) => emitRenewed(tokenMgmtRef, idTokenKey, idToken, oldTokenStorage[idTokenKey]));\n        // return freshToken by key\n        const freshToken = get(storage, key);\n        return freshToken;\n    })\n        .catch(function (err) {\n        if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n            // remove expired tokens in storage\n            const removedTokens = [];\n            const tokenStorage = storage.getStorage();\n            Object.keys(tokenStorage).forEach(key => {\n                const token = tokenStorage[key];\n                if (token && hasExpired(tokenMgmtRef, token)) {\n                    delete tokenStorage[key];\n                    removedTokens.push({ key, token });\n                    clearExpireEventTimeout(tokenMgmtRef, key);\n                }\n            });\n            storage.setStorage(tokenStorage);\n            // emit removed events\n            if (!removedTokens.length) {\n                // tokens have been removed from other tabs\n                // still trigger removed event for downstream listeners\n                emitRemoved(tokenMgmtRef, ID_TOKEN_STORAGE_KEY);\n                emitRemoved(tokenMgmtRef, ACCESS_TOKEN_STORAGE_KEY);\n            }\n            else {\n                removedTokens.forEach((key, token) => emitRemoved(tokenMgmtRef, key, token));\n            }\n            err.tokenKey = key;\n            emitError(tokenMgmtRef, err);\n        }\n        throw err;\n    })\n        .finally(function () {\n        // Remove existing promise key\n        delete tokenMgmtRef.renewPromise[key];\n    });\n    return tokenMgmtRef.renewPromise[key];\n}\nfunction clear(tokenMgmtRef, storage) {\n    clearExpireEventTimeoutAll(tokenMgmtRef);\n    storage.clearStorage();\n}\nfunction shouldThrottleRenew(renewTimeQueue) {\n    let res = false;\n    renewTimeQueue.push(Date.now());\n    if (renewTimeQueue.length >= 10) {\n        // get and remove first item from queue\n        const firstTime = renewTimeQueue.shift();\n        const lastTime = renewTimeQueue[renewTimeQueue.length - 1];\n        res = lastTime - firstTime < 30 * 1000;\n    }\n    return res;\n}\nfunction getTokensFromStorageValue(value) {\n    let tokens;\n    try {\n        tokens = JSON.parse(value) || {};\n    }\n    catch (e) {\n        tokens = {};\n    }\n    return tokens;\n}\nexport class TokenManager {\n    constructor(sdk, options) {\n        options = Object.assign({}, DEFAULT_OPTIONS, removeNils(options));\n        if (!sdk.emitter) {\n            throw new AuthSdkError('Emitter should be initialized before TokenManager');\n        }\n        if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n            warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n            options.storage = 'sessionStorage';\n        }\n        if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n            warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n            options.storage = 'cookie';\n        }\n        if (isIE11OrLess()) {\n            options._storageEventDelay = options._storageEventDelay || 1000;\n        }\n        var storageProvider;\n        if (typeof options.storage === 'object') {\n            // A custom storage provider must implement getItem(key) and setItem(key, val)\n            storageProvider = options.storage;\n        }\n        else {\n            switch (options.storage) {\n                case 'localStorage':\n                    storageProvider = localStorage;\n                    break;\n                case 'sessionStorage':\n                    storageProvider = sessionStorage;\n                    break;\n                case 'cookie':\n                    // Implement customized cookie storage to make sure each token is stored separatedly in cookie\n                    storageProvider = (function (options) {\n                        var storage = storageUtil.getCookieStorage(options);\n                        return {\n                            getItem: function (key) {\n                                var data = storage.getItem();\n                                var value = {};\n                                Object.keys(data).forEach(k => {\n                                    if (k.indexOf(key) === 0) {\n                                        value[k.replace(`${key}_`, '')] = JSON.parse(data[k]);\n                                    }\n                                });\n                                return JSON.stringify(value);\n                            },\n                            setItem: function (key, value) {\n                                var existingValues = JSON.parse(this.getItem(key));\n                                value = JSON.parse(value);\n                                // Set key-value pairs from input to cookies\n                                Object.keys(value).forEach(k => {\n                                    var storageKey = key + '_' + k;\n                                    var valueToStore = JSON.stringify(value[k]);\n                                    storage.setItem(storageKey, valueToStore);\n                                    delete existingValues[k];\n                                });\n                                // Delete unmatched keys from existing cookies\n                                Object.keys(existingValues).forEach(k => {\n                                    storageUtil.storage.delete(key + '_' + k);\n                                });\n                            }\n                        };\n                    }(sdk.options.cookies));\n                    break;\n                case 'memory':\n                    storageProvider = storageUtil.getInMemoryStorage();\n                    break;\n                default:\n                    throw new AuthSdkError('Unrecognized storage option');\n            }\n        }\n        var storage = storageBuilder(storageProvider, options.storageKey);\n        var clock = SdkClock.create( /* sdk, options */);\n        var tokenMgmtRef = {\n            clock: clock,\n            options: options,\n            emitter: sdk.emitter,\n            expireTimeouts: {},\n            renewPromise: {}\n        };\n        this.add = add.bind(this, sdk, tokenMgmtRef, storage);\n        this.get = getAsync.bind(this, storage);\n        this.remove = remove.bind(this, tokenMgmtRef, storage);\n        this.clear = clear.bind(this, tokenMgmtRef, storage);\n        this.renew = renew.bind(this, sdk, tokenMgmtRef, storage);\n        this.on = tokenMgmtRef.emitter.on.bind(tokenMgmtRef.emitter);\n        this.off = tokenMgmtRef.emitter.off.bind(tokenMgmtRef.emitter);\n        this.hasExpired = hasExpired.bind(this, tokenMgmtRef);\n        this.getTokens = getTokensAsync.bind(this, storage);\n        this.setTokens = setTokens.bind(this, sdk, tokenMgmtRef, storage);\n        this._getStorageKeyByType = getKeyByType.bind(this, storage);\n        this._clearExpireEventTimeoutAll = clearExpireEventTimeoutAll.bind(this, tokenMgmtRef);\n        this._getOptions = () => clone(options);\n        this._resetExpireEventTimeoutAll = resetExpireEventTimeoutAll.bind(this, sdk, tokenMgmtRef, storage);\n        this._emitEventsForCrossTabsStorageUpdate = emitEventsForCrossTabsStorageUpdate.bind(this, tokenMgmtRef);\n        const renewTimeQueue = [];\n        const onTokenExpiredHandler = (key) => {\n            if (options.autoRenew) {\n                if (shouldThrottleRenew(renewTimeQueue)) {\n                    const error = new AuthSdkError('Too many token renew requests');\n                    emitError(tokenMgmtRef, error);\n                }\n                else {\n                    this.renew(key).catch(() => { }); // Renew errors will emit an \"error\" event \n                }\n            }\n            else if (options.autoRemove) {\n                this.remove(key);\n            }\n        };\n        this.on(EVENT_EXPIRED, onTokenExpiredHandler);\n        setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n        // Sync authState cross multiple tabs when localStorage is used as the storageProvider\n        // A StorageEvent is sent to a window when a storage area it has access to is changed \n        // within the context of another document.\n        // https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent\n        window.addEventListener('storage', ({ key, newValue, oldValue }) => {\n            const handleCrossTabsStorageChange = () => {\n                this._resetExpireEventTimeoutAll();\n                this._emitEventsForCrossTabsStorageUpdate(newValue, oldValue);\n            };\n            // Skip if:\n            // not from localStorage.clear (event.key is null)\n            // event.key is not the storageKey\n            // oldValue === newValue\n            if (key && (key !== options.storageKey || newValue === oldValue)) {\n                return;\n            }\n            // LocalStorage cross tabs update is not synced in IE, set a 1s timer by default to read latest value\n            // https://stackoverflow.com/questions/24077117/localstorage-in-win8-1-ie11-does-not-synchronize\n            setTimeout(() => handleCrossTabsStorageChange(), options._storageEventDelay);\n        });\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthApiError from './AuthApiError';\nimport AuthPollStopError from './AuthPollStopError';\nimport AuthSdkError from './AuthSdkError';\nimport OAuthError from './OAuthError';\nexport { AuthApiError, AuthPollStopError, AuthSdkError, OAuthError };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */\n/* global SDK_VERSION */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport OktaAuthBase from '../OktaAuthBase';\nimport * as features from './features';\nimport fetchRequest from '../fetch/fetchRequest';\nimport browserStorage from './browserStorage';\nimport { removeTrailingSlash, toQueryString, toAbsoluteUrl, clone, warn, deprecate } from '../util';\nimport { getUserAgent } from '../builderUtil';\nimport { DEFAULT_MAX_CLOCK_SKEW, REFERRER_PATH_STORAGE_KEY } from '../constants';\nimport { closeSession, sessionExists, getSession, refreshSession, setCookieAndRedirect } from '../session';\nimport { getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, revokeToken, renewToken, renewTokens, getUserInfo, verifyToken, prepareTokenParams, exchangeCodeForTokens } from '../token';\nimport { TokenManager } from '../TokenManager';\nimport { getOAuthUrls, isLoginRedirect } from '../oauthUtil';\nimport http from '../http';\nimport PromiseQueue from '../PromiseQueue';\nimport fingerprint from './fingerprint';\nimport { postToTransaction } from '../tx';\nimport { AuthStateManager } from '../AuthStateManager';\nconst Emitter = require('tiny-emitter');\nfunction getCookieSettings(sdk, args) {\n    // Secure cookies will be automatically used on a HTTPS connection\n    // Non-secure cookies will be automatically used on a HTTP connection\n    // secure option can override the automatic behavior\n    var cookieSettings = args.cookies || {};\n    if (typeof cookieSettings.secure === 'undefined') {\n        cookieSettings.secure = sdk.features.isHTTPS();\n    }\n    if (typeof cookieSettings.sameSite === 'undefined') {\n        cookieSettings.sameSite = cookieSettings.secure ? 'none' : 'lax';\n    }\n    // If secure=true, but the connection is not HTTPS, set secure=false.\n    if (cookieSettings.secure && !sdk.features.isHTTPS()) {\n        // eslint-disable-next-line no-console\n        warn('The current page is not being served with the HTTPS protocol.\\n' +\n            'For security reasons, we strongly recommend using HTTPS.\\n' +\n            'If you cannot use HTTPS, set \"cookies.secure\" option to false.');\n        cookieSettings.secure = false;\n    }\n    // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n    // If sameSite=none, but the connection is not HTTPS, set sameSite=lax.\n    if (cookieSettings.sameSite === 'none' && !cookieSettings.secure) {\n        cookieSettings.sameSite = 'lax';\n    }\n    return cookieSettings;\n}\nclass OktaAuthBrowser extends OktaAuthBase {\n    constructor(args) {\n        super(Object.assign({\n            httpRequestClient: fetchRequest,\n            storageUtil: browserStorage\n        }, args));\n        this._pending = { handleLogin: false };\n        this.options = Object.assign(this.options, {\n            clientId: args.clientId,\n            authorizeUrl: removeTrailingSlash(args.authorizeUrl),\n            userinfoUrl: removeTrailingSlash(args.userinfoUrl),\n            revokeUrl: removeTrailingSlash(args.revokeUrl),\n            logoutUrl: removeTrailingSlash(args.logoutUrl),\n            pkce: args.pkce === false ? false : true,\n            redirectUri: toAbsoluteUrl(args.redirectUri, window.location.origin),\n            postLogoutRedirectUri: args.postLogoutRedirectUri,\n            responseMode: args.responseMode,\n            responseType: args.responseType,\n            transformErrorXHR: args.transformErrorXHR,\n            cookies: getCookieSettings(this, args),\n            scopes: args.scopes,\n            transformAuthState: args.transformAuthState,\n            restoreOriginalUri: args.restoreOriginalUri\n        });\n        this.userAgent = getUserAgent(args, `okta-auth-js/${SDK_VERSION}`);\n        // Digital clocks will drift over time, so the server\n        // can misalign with the time reported by the browser.\n        // The maxClockSkew allows relaxing the time-based\n        // validation of tokens (in seconds, not milliseconds).\n        // It currently defaults to 300, because 5 min is the\n        // default maximum tolerance allowed by Kerberos.\n        // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n        if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n            this.options.maxClockSkew = DEFAULT_MAX_CLOCK_SKEW;\n        }\n        else {\n            this.options.maxClockSkew = args.maxClockSkew;\n        }\n        this.session = {\n            close: closeSession.bind(null, this),\n            exists: sessionExists.bind(null, this),\n            get: getSession.bind(null, this),\n            refresh: refreshSession.bind(null, this),\n            setCookieAndRedirect: setCookieAndRedirect.bind(null, this)\n        };\n        this._tokenQueue = new PromiseQueue();\n        this.token = {\n            prepareTokenParams: prepareTokenParams.bind(null, this),\n            exchangeCodeForTokens: exchangeCodeForTokens.bind(null, this),\n            getWithoutPrompt: getWithoutPrompt.bind(null, this),\n            getWithPopup: getWithPopup.bind(null, this),\n            getWithRedirect: getWithRedirect.bind(null, this),\n            parseFromUrl: parseFromUrl.bind(null, this),\n            decode: decodeToken,\n            revoke: revokeToken.bind(null, this),\n            renew: renewToken.bind(null, this),\n            renewTokens: renewTokens.bind(null, this),\n            getUserInfo: getUserInfo.bind(null, this),\n            verify: verifyToken.bind(null, this),\n            isLoginRedirect: isLoginRedirect.bind(null, this)\n        };\n        // Wrap all async token API methods using MethodQueue to avoid issues with concurrency\n        const syncMethods = ['decode', 'isLoginRedirect'];\n        Object.keys(this.token).forEach(key => {\n            if (syncMethods.indexOf(key) >= 0) { // sync methods should not be wrapped\n                return;\n            }\n            var method = this.token[key];\n            this.token[key] = PromiseQueue.prototype.push.bind(this._tokenQueue, method, null);\n        });\n        Object.assign(this.token.getWithRedirect, {\n            // This is exposed so we can set window.location in our tests\n            _setLocation: function (url) {\n                window.location = url;\n            }\n        });\n        Object.assign(this.token.parseFromUrl, {\n            // This is exposed so we can mock getting window.history in our tests\n            _getHistory: function () {\n                return window.history;\n            },\n            // This is exposed so we can mock getting window.location in our tests\n            _getLocation: function () {\n                return window.location;\n            },\n            // This is exposed so we can mock getting window.document in our tests\n            _getDocument: function () {\n                return window.document;\n            }\n        });\n        // Fingerprint API\n        this.fingerprint = fingerprint.bind(null, this);\n        this.emitter = new Emitter();\n        this.tokenManager = new TokenManager(this, args.tokenManager);\n        this.authStateManager = new AuthStateManager(this);\n    }\n    /**\n     * Alias method of signInWithCredentials\n     *\n     * @todo This method is deprecated. Remove it in 5.0\n     */\n    signIn(opts) {\n        if (this.features.isLocalhost()) {\n            deprecate('This method has been deprecated, please use signInWithCredentials() instead.');\n        }\n        return this.signInWithCredentials(opts);\n    }\n    signInWithCredentials(opts) {\n        opts = clone(opts || {});\n        const _postToTransaction = (options) => {\n            delete opts.sendFingerprint;\n            return postToTransaction(this, '/api/v1/authn', opts, options);\n        };\n        if (!opts.sendFingerprint) {\n            return _postToTransaction();\n        }\n        return this.fingerprint()\n            .then(function (fingerprint) {\n            return _postToTransaction({\n                headers: {\n                    'X-Device-Fingerprint': fingerprint\n                }\n            });\n        });\n    }\n    signInWithRedirect(_a = {}) {\n        var { originalUri } = _a, additionalParams = __rest(_a, [\"originalUri\"]);\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._pending.handleLogin) {\n                // Don't trigger second round\n                return;\n            }\n            this._pending.handleLogin = true;\n            try {\n                // Trigger default signIn redirect flow\n                if (originalUri) {\n                    this.setOriginalUri(originalUri);\n                }\n                const params = Object.assign({\n                    // TODO: remove this line when default scopes are changed OKTA-343294\n                    scopes: this.options.scopes || ['openid', 'email', 'profile']\n                }, additionalParams);\n                yield this.token.getWithRedirect(params);\n            }\n            finally {\n                this._pending.handleLogin = false;\n            }\n        });\n    }\n    // Ends the current Okta SSO session without redirecting to Okta.\n    closeSession() {\n        // Clear all local tokens\n        this.tokenManager.clear();\n        return this.session.close() // DELETE /api/v1/sessions/me\n            .catch(function (e) {\n            if (e.name === 'AuthApiError' && e.errorCode === 'E0000007') {\n                // Session does not exist or has already been closed\n                return;\n            }\n            throw e;\n        });\n    }\n    // Revokes the access token for the application session\n    revokeAccessToken(accessToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!accessToken) {\n                accessToken = (yield this.tokenManager.getTokens()).accessToken;\n                const accessTokenKey = this.tokenManager._getStorageKeyByType('accessToken');\n                this.tokenManager.remove(accessTokenKey);\n            }\n            // Access token may have been removed. In this case, we will silently succeed.\n            if (!accessToken) {\n                return Promise.resolve();\n            }\n            return this.token.revoke(accessToken);\n        });\n    }\n    // Revokes the refresh token for the application session\n    revokeRefreshToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!refreshToken) {\n                refreshToken = (yield this.tokenManager.getTokens()).refreshToken;\n                const refreshTokenKey = this.tokenManager._getStorageKeyByType('refreshToken');\n                this.tokenManager.remove(refreshTokenKey);\n            }\n            // Refresh token may have been removed. In this case, we will silently succeed.\n            if (!refreshToken) {\n                return Promise.resolve();\n            }\n            return this.token.revoke(refreshToken);\n        });\n    }\n    // Revokes refreshToken or accessToken, clears all local tokens, then redirects to Okta to end the SSO session.\n    signOut(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = Object.assign({}, options);\n            // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n            var defaultUri = window.location.origin;\n            var currentUri = window.location.href;\n            var postLogoutRedirectUri = options.postLogoutRedirectUri\n                || this.options.postLogoutRedirectUri\n                || defaultUri;\n            var accessToken = options.accessToken;\n            var refreshToken = options.refreshToken;\n            var revokeAccessToken = options.revokeAccessToken !== false;\n            var idToken = options.idToken;\n            var logoutUrl = getOAuthUrls(this).logoutUrl;\n            if (typeof idToken === 'undefined') {\n                idToken = (yield this.tokenManager.getTokens()).idToken;\n            }\n            if (revokeAccessToken && typeof refreshToken === 'undefined') {\n                refreshToken = (yield this.tokenManager.getTokens()).refreshToken;\n            }\n            if (revokeAccessToken && typeof accessToken === 'undefined') {\n                accessToken = (yield this.tokenManager.getTokens()).accessToken;\n            }\n            // Clear all local tokens\n            this.tokenManager.clear();\n            if (revokeAccessToken && refreshToken) {\n                yield this.revokeRefreshToken(refreshToken);\n            }\n            if (revokeAccessToken && accessToken) {\n                yield this.revokeAccessToken(accessToken);\n            }\n            // No idToken? This can happen if the storage was cleared.\n            // Fallback to XHR signOut, then simulate a redirect to the post logout uri\n            if (!idToken) {\n                return this.closeSession() // can throw if the user cannot be signed out\n                    .then(function () {\n                    if (postLogoutRedirectUri === currentUri) {\n                        window.location.reload(); // force a hard reload if URI is not changing\n                    }\n                    else {\n                        window.location.assign(postLogoutRedirectUri);\n                    }\n                });\n            }\n            // logout redirect using the idToken.\n            var state = options.state;\n            var idTokenHint = idToken.idToken; // a string\n            var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n                '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n            // State allows option parameters to be passed to logout redirect uri\n            if (state) {\n                logoutUri += '&state=' + encodeURIComponent(state);\n            }\n            window.location.assign(logoutUri);\n        });\n    }\n    webfinger(opts) {\n        var url = '/.well-known/webfinger' + toQueryString(opts);\n        var options = {\n            headers: {\n                'Accept': 'application/jrd+json'\n            }\n        };\n        return http.get(this, url, options);\n    }\n    //\n    // Common Methods from downstream SDKs\n    //\n    isAuthenticated(timeout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const authState = this.authStateManager.getAuthState();\n            if (!authState.isPending) {\n                return Promise.resolve(authState.isAuthenticated);\n            }\n            let clear, handler, timeoutId;\n            return new Promise(resolve => {\n                clear = () => {\n                    this.authStateManager.unsubscribe(handler);\n                    clearTimeout(timeoutId);\n                };\n                handler = ({ isAuthenticated, isPending }) => {\n                    if (!isPending) {\n                        resolve(isAuthenticated);\n                        clear();\n                    }\n                };\n                timeoutId = setTimeout(() => {\n                    resolve(false);\n                    clear();\n                }, timeout || 60 * 1000);\n                this.authStateManager.subscribe(handler);\n                this.authStateManager.updateAuthState();\n            });\n        });\n    }\n    getUser() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { idToken, accessToken } = this.authStateManager.getAuthState();\n            return this.token.getUserInfo(accessToken, idToken);\n        });\n    }\n    getIdToken() {\n        const { idToken } = this.authStateManager.getAuthState();\n        return idToken ? idToken.idToken : undefined;\n    }\n    getAccessToken() {\n        const { accessToken } = this.authStateManager.getAuthState();\n        return accessToken ? accessToken.accessToken : undefined;\n    }\n    getRefreshToken() {\n        const { refreshToken } = this.authStateManager.getAuthState();\n        return refreshToken ? refreshToken.refreshToken : undefined;\n    }\n    /**\n     * Store parsed tokens from redirect url\n     */\n    storeTokensFromRedirect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { tokens } = yield this.token.parseFromUrl();\n            this.tokenManager.setTokens(tokens);\n        });\n    }\n    setOriginalUri(originalUri) {\n        // Use current location if originalUri was not passed\n        originalUri = originalUri || window.location.href;\n        // Store originalUri\n        const storage = browserStorage.getSessionStorage();\n        storage.setItem(REFERRER_PATH_STORAGE_KEY, originalUri);\n    }\n    getOriginalUri() {\n        const storage = browserStorage.getSessionStorage();\n        const originalUri = storage.getItem(REFERRER_PATH_STORAGE_KEY) || window.location.origin;\n        return originalUri;\n    }\n    removeOriginalUri() {\n        const storage = browserStorage.getSessionStorage();\n        storage.removeItem(REFERRER_PATH_STORAGE_KEY);\n    }\n    isLoginRedirect() {\n        return isLoginRedirect(this);\n    }\n    handleLoginRedirect(tokens) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const handleRedirect = ({ isPending }) => __awaiter(this, void 0, void 0, function* () {\n                if (isPending) {\n                    return;\n                }\n                // Unsubscribe listener\n                this.authStateManager.unsubscribe(handleRedirect);\n                // Get and clear originalUri from storage\n                const originalUri = this.getOriginalUri();\n                this.removeOriginalUri();\n                // Redirect to originalUri\n                const { restoreOriginalUri } = this.options;\n                if (restoreOriginalUri) {\n                    yield restoreOriginalUri(this, originalUri);\n                }\n                else {\n                    window.location.replace(originalUri);\n                }\n            });\n            // Handle redirect after authState is updated \n            this.authStateManager.subscribe(handleRedirect);\n            // Store tokens and update AuthState by the emitted events\n            if (tokens) {\n                this.tokenManager.setTokens(tokens);\n            }\n            else if (this.isLoginRedirect()) {\n                yield this.storeTokensFromRedirect();\n            }\n            else {\n                this.authStateManager.unsubscribe(handleRedirect);\n            }\n        });\n    }\n    isPKCE() {\n        return !!this.options.pkce;\n    }\n    hasResponseType(responseType) {\n        let hasResponseType = false;\n        if (Array.isArray(this.options.responseType) && this.options.responseType.length) {\n            hasResponseType = this.options.responseType.indexOf(responseType) >= 0;\n        }\n        else {\n            hasResponseType = this.options.responseType === responseType;\n        }\n        return hasResponseType;\n    }\n    isAuthorizationCodeFlow() {\n        return this.hasResponseType('code');\n    }\n}\n// Hoist feature detection functions to static type\nOktaAuthBrowser.features = OktaAuthBrowser.prototype.features = features;\nexport default OktaAuthBrowser;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { assertValidConfig } from './builderUtil';\nimport { removeTrailingSlash } from './util';\nimport { transactionStatus, resumeTransaction, transactionExists, introspect, postToTransaction } from './tx';\nimport PKCE from './pkce';\nexport default class OktaAuthBase {\n    constructor(args) {\n        assertValidConfig(args);\n        this.options = {\n            issuer: removeTrailingSlash(args.issuer),\n            tokenUrl: removeTrailingSlash(args.tokenUrl),\n            httpRequestClient: args.httpRequestClient,\n            transformErrorXHR: args.transformErrorXHR,\n            storageUtil: args.storageUtil,\n            headers: args.headers,\n            devMode: args.devMode || false,\n            clientId: args.clientId,\n            redirectUri: args.redirectUri,\n            pkce: args.pkce\n        };\n        // Give the developer the ability to disable token signature validation.\n        this.options.ignoreSignature = !!args.ignoreSignature;\n        this.tx = {\n            status: transactionStatus.bind(null, this),\n            resume: resumeTransaction.bind(null, this),\n            exists: Object.assign(transactionExists.bind(null, this), {\n                _get: (name) => {\n                    const storage = this.options.storageUtil.storage;\n                    return storage.get(name);\n                }\n            }),\n            introspect: introspect.bind(null, this)\n        };\n        this.pkce = {\n            DEFAULT_CODE_CHALLENGE_METHOD: PKCE.DEFAULT_CODE_CHALLENGE_METHOD,\n            generateVerifier: PKCE.generateVerifier,\n            computeChallenge: PKCE.computeChallenge\n        };\n    }\n    // { username, password, (relayState), (context) }\n    signIn(opts) {\n        return postToTransaction(this, '/api/v1/authn', opts);\n    }\n    getIssuerOrigin() {\n        // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n        return this.options.issuer.split('/oauth2/')[0];\n    }\n    // { username, (relayState) }\n    forgotPassword(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n    }\n    // { username, (relayState) }\n    unlockAccount(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n    }\n    // { recoveryToken }\n    verifyRecoveryToken(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n    }\n}\n","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport fetch from 'cross-fetch';\nfunction readData(response) {\n    if (response.headers.get('Content-Type') &&\n        response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n        return response.json()\n            // JSON parse can fail if response is not a valid object\n            .catch(e => {\n            return {\n                error: e,\n                errorSummary: 'Could not parse server response'\n            };\n        });\n    }\n    else {\n        return response.text();\n    }\n}\nfunction formatResult(status, data) {\n    const isObject = typeof data === 'object';\n    const result = {\n        responseText: isObject ? JSON.stringify(data) : data,\n        status: status\n    };\n    if (isObject) {\n        result.responseType = 'json';\n        result.responseJSON = data;\n    }\n    return result;\n}\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n    var body = args.data;\n    var headers = args.headers || {};\n    var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n    // JSON encode body (if appropriate)\n    if (contentType === 'application/json' && body && typeof body !== 'string') {\n        body = JSON.stringify(body);\n    }\n    var fetchPromise = fetch(url, {\n        method: method,\n        headers: args.headers,\n        body: body,\n        credentials: args.withCredentials ? 'include' : 'omit'\n    })\n        .then(function (response) {\n        var error = !response.ok;\n        var status = response.status;\n        return readData(response)\n            .then(data => {\n            return formatResult(status, data);\n        })\n            .then(result => {\n            if (error) {\n                // Throwing result object since error handling is done in http.js\n                throw result;\n            }\n            return result;\n        });\n    });\n    return fetchPromise;\n}\nexport default fetchRequest;\n","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window */\nimport { omit, getLink, toQueryString } from './util';\nimport http from './http';\nfunction sessionExists(sdk) {\n    return sdk.session.get()\n        .then(function (res) {\n        if (res.status === 'ACTIVE') {\n            return true;\n        }\n        return false;\n    })\n        .catch(function () {\n        return false;\n    });\n}\nfunction getSession(sdk) {\n    return http.get(sdk, '/api/v1/sessions/me')\n        .then(function (session) {\n        var res = omit(session, '_links');\n        res.refresh = function () {\n            return http.post(sdk, getLink(session, 'refresh').href);\n        };\n        res.user = function () {\n            return http.get(sdk, getLink(session, 'user').href);\n        };\n        return res;\n    })\n        .catch(function () {\n        // Return INACTIVE status on failure\n        return { status: 'INACTIVE' };\n    });\n}\nfunction closeSession(sdk) {\n    return http.httpRequest(sdk, {\n        url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n        method: 'DELETE'\n    });\n}\nfunction refreshSession(sdk) {\n    return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n    redirectUrl = redirectUrl || window.location.href;\n    window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n        toQueryString({\n            checkAccountSetupComplete: true,\n            token: sessionToken,\n            redirectUrl: redirectUrl\n        }));\n}\nexport { sessionExists, getSession, closeSession, refreshSession, setCookieAndRedirect };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* global window, document, btoa */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { toQueryString, base64UrlToString, clone, isString, removeNils, isFunction } from './util';\nimport { getOAuthUrls, validateClaims, getKey, addListener, removeListener, urlParamsToObject, generateState, generateNonce, loadFrame, loadPopup, getWellKnown, isLoginRedirect } from './oauthUtil';\nimport * as sdkCrypto from './crypto';\nimport AuthSdkError from './errors/AuthSdkError';\nimport OAuthError from './errors/OAuthError';\nimport { REDIRECT_OAUTH_PARAMS_NAME, REDIRECT_NONCE_COOKIE_NAME, REDIRECT_STATE_COOKIE_NAME, DEFAULT_CODE_CHALLENGE_METHOD } from './constants';\nimport browserStorage from './browser/browserStorage';\nimport PKCE from './pkce';\nimport { isToken, isAccessToken, isIDToken } from './types';\nconst cookies = browserStorage.storage;\n// refresh tokens have precedence to be revoked if no token is specified\nfunction revokeToken(sdk, token) {\n    return Promise.resolve()\n        .then(function () {\n        var accessToken;\n        var refreshToken;\n        if (token) {\n            accessToken = token.accessToken;\n            refreshToken = token.refreshToken;\n        }\n        if (!accessToken && !refreshToken) {\n            throw new AuthSdkError('A valid access or refresh token object is required');\n        }\n        var clientId = sdk.options.clientId;\n        if (!clientId) {\n            throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n        }\n        var revokeUrl = getOAuthUrls(sdk).revokeUrl;\n        var args = toQueryString({\n            // eslint-disable-next-line camelcase\n            token_type_hint: refreshToken ? 'refresh_token' : 'access_token',\n            token: refreshToken || accessToken,\n        }).slice(1);\n        var creds = btoa(clientId);\n        return http.post(sdk, revokeUrl, args, {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Basic ' + creds\n            }\n        });\n    });\n}\nfunction decodeToken(token) {\n    var jwt = token.split('.');\n    var decodedToken;\n    try {\n        decodedToken = {\n            header: JSON.parse(base64UrlToString(jwt[0])),\n            payload: JSON.parse(base64UrlToString(jwt[1])),\n            signature: jwt[2]\n        };\n    }\n    catch (e) {\n        throw new AuthSdkError('Malformed token');\n    }\n    return decodedToken;\n}\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n    return Promise.resolve()\n        .then(function () {\n        if (!token || !token.idToken) {\n            throw new AuthSdkError('Only idTokens may be verified');\n        }\n        var jwt = decodeToken(token.idToken);\n        var validationOptions = {\n            clientId: sdk.options.clientId,\n            issuer: sdk.options.issuer,\n            ignoreSignature: sdk.options.ignoreSignature\n        };\n        Object.assign(validationOptions, validationParams);\n        // Standard claim validation\n        validateClaims(sdk, jwt.payload, validationOptions);\n        // If the browser doesn't support native crypto or we choose not\n        // to verify the signature, bail early\n        if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n            return token;\n        }\n        return getKey(sdk, token.issuer, jwt.header.kid)\n            .then(function (key) {\n            return sdkCrypto.verifyToken(token.idToken, key);\n        })\n            .then(function (valid) {\n            if (!valid) {\n                throw new AuthSdkError('The token signature is not valid');\n            }\n            if (validationParams && validationParams.accessToken && token.claims.at_hash) {\n                return sdkCrypto.getOidcHash(validationParams.accessToken)\n                    .then(hash => {\n                    if (hash !== token.claims.at_hash) {\n                        throw new AuthSdkError('Token hash verification failed');\n                    }\n                });\n            }\n        })\n            .then(() => {\n            return token;\n        });\n    });\n}\nfunction addPostMessageListener(sdk, timeout, state) {\n    var responseHandler;\n    var timeoutId;\n    var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n        responseHandler = function responseHandler(e) {\n            if (!e.data || e.data.state !== state) {\n                // A message not meant for us\n                return;\n            }\n            // Configuration mismatch between saved token and current app instance\n            // This may happen if apps with different issuers are running on the same host url\n            // If they share the same storage key, they may read and write tokens in the same location.\n            // Common when developing against http://localhost\n            if (e.origin !== sdk.getIssuerOrigin()) {\n                return reject(new AuthSdkError('The request does not match client configuration'));\n            }\n            resolve(e.data);\n        };\n        addListener(window, 'message', responseHandler);\n        timeoutId = setTimeout(function () {\n            reject(new AuthSdkError('OAuth flow timed out'));\n        }, timeout || 120000);\n    });\n    return msgReceivedOrTimeout\n        .finally(function () {\n        clearTimeout(timeoutId);\n        removeListener(window, 'message', responseHandler);\n    });\n}\n// codeVerifier is required. May pass either an authorizationCode or interactionCode\nfunction exchangeCodeForTokens(sdk, tokenParams, urls) {\n    if (!sdk.options.pkce) {\n        return Promise.reject(new AuthSdkError('\"pkce.exchangeCodeForTokens\" method requires \"pkce\" SDK option to be true.'));\n    }\n    urls = urls || getOAuthUrls(sdk, tokenParams);\n    // build params using defaults + options\n    tokenParams = Object.assign({}, getDefaultTokenParams(sdk), clone(tokenParams));\n    const { authorizationCode, interactionCode, codeVerifier, clientId, redirectUri, scopes, ignoreSignature, } = tokenParams;\n    var getTokenOptions = {\n        clientId,\n        redirectUri,\n        authorizationCode,\n        interactionCode,\n        codeVerifier,\n    };\n    return PKCE.exchangeCodeForTokens(sdk, getTokenOptions, urls)\n        .then((response) => {\n        // `handleOAuthResponse` hanadles responses from both `/authorize` and `/token` endpoints\n        // Here we modify the response from `/token` so that it more closely matches a response from `/authorize`\n        // `responseType` is used to validate that the expected tokens were returned\n        const responseType = ['token']; // an accessToken will always be returned\n        if (scopes.indexOf('openid') !== -1) {\n            responseType.push('id_token'); // an idToken will be returned if \"openid\" is in the scopes\n        }\n        const handleResponseOptions = {\n            clientId,\n            redirectUri,\n            scopes,\n            responseType,\n            ignoreSignature,\n        };\n        return handleOAuthResponse(sdk, handleResponseOptions, response, urls)\n            .then((response) => {\n            // For compatibility, \"code\" is returned in the TokenResponse. OKTA-326091\n            response.code = authorizationCode;\n            return response;\n        });\n    });\n}\nfunction validateResponse(res, oauthParams) {\n    if (res['error'] || res['error_description']) {\n        throw new OAuthError(res['error'], res['error_description']);\n    }\n    if (res.state !== oauthParams.state) {\n        throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n    }\n}\n// eslint-disable-next-line max-len\nfunction handleOAuthResponse(sdk, tokenParams, res, urls) {\n    var pkce = sdk.options.pkce !== false;\n    // The result contains an authorization_code and PKCE is enabled \n    // `exchangeCodeForTokens` will call /token then call `handleOauthResponse` recursively with the result\n    if (res.code && pkce) {\n        return exchangeCodeForTokens(sdk, Object.assign({}, tokenParams, {\n            authorizationCode: res.code\n        }), urls);\n    }\n    tokenParams = tokenParams || getDefaultTokenParams(sdk);\n    urls = urls || getOAuthUrls(sdk, tokenParams);\n    var responseType = tokenParams.responseType;\n    if (!Array.isArray(responseType)) {\n        responseType = [responseType];\n    }\n    var scopes = clone(tokenParams.scopes);\n    var clientId = tokenParams.clientId || sdk.options.clientId;\n    // Handling the result from implicit flow or PKCE token exchange\n    return Promise.resolve()\n        .then(function () {\n        validateResponse(res, tokenParams);\n    }).then(function () {\n        var tokenDict = {};\n        var expiresIn = res.expires_in;\n        var tokenType = res.token_type;\n        var accessToken = res.access_token;\n        var idToken = res.id_token;\n        var refreshToken = res.refresh_token;\n        if (accessToken) {\n            var accessJwt = sdk.token.decode(accessToken);\n            tokenDict.accessToken = {\n                value: accessToken,\n                accessToken: accessToken,\n                claims: accessJwt.payload,\n                expiresAt: Number(expiresIn) + Math.floor(Date.now() / 1000),\n                tokenType: tokenType,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                userinfoUrl: urls.userinfoUrl\n            };\n        }\n        if (refreshToken) {\n            tokenDict.refreshToken = {\n                value: refreshToken,\n                refreshToken: refreshToken,\n                expiresAt: Number(expiresIn) + Math.floor(Date.now() / 1000),\n                scopes: scopes,\n                tokenUrl: urls.tokenUrl,\n                authorizeUrl: urls.authorizeUrl,\n                issuer: urls.issuer,\n            };\n        }\n        if (idToken) {\n            var idJwt = sdk.token.decode(idToken);\n            var idTokenObj = {\n                value: idToken,\n                idToken: idToken,\n                claims: idJwt.payload,\n                expiresAt: idJwt.payload.exp,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                issuer: urls.issuer,\n                clientId: clientId\n            };\n            var validationParams = {\n                clientId: clientId,\n                issuer: urls.issuer,\n                nonce: tokenParams.nonce,\n                accessToken: accessToken\n            };\n            if (tokenParams.ignoreSignature !== undefined) {\n                validationParams.ignoreSignature = tokenParams.ignoreSignature;\n            }\n            return verifyToken(sdk, idTokenObj, validationParams)\n                .then(function () {\n                tokenDict.idToken = idTokenObj;\n                return tokenDict;\n            });\n        }\n        return tokenDict;\n    })\n        .then(function (tokenDict) {\n        // Validate received tokens against requested response types \n        if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n        }\n        if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n        }\n        return {\n            tokens: tokenDict,\n            state: res.state,\n            code: res.code\n        };\n    });\n}\nfunction getDefaultTokenParams(sdk) {\n    const { pkce, clientId, redirectUri, responseType, responseMode, scopes, ignoreSignature } = sdk.options;\n    return {\n        pkce,\n        clientId,\n        redirectUri: redirectUri || window.location.href,\n        responseType: responseType || ['token', 'id_token'],\n        responseMode,\n        state: generateState(),\n        nonce: generateNonce(),\n        scopes: scopes || ['openid', 'email'],\n        ignoreSignature\n    };\n}\nfunction convertTokenParamsToOAuthParams(tokenParams) {\n    // Quick validation\n    if (!tokenParams.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (isString(tokenParams.responseType) && tokenParams.responseType.indexOf(' ') !== -1) {\n        throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n    }\n    // Convert our params to their actual OAuth equivalents\n    var oauthParams = {\n        'client_id': tokenParams.clientId,\n        'code_challenge': tokenParams.codeChallenge,\n        'code_challenge_method': tokenParams.codeChallengeMethod,\n        'display': tokenParams.display,\n        'idp': tokenParams.idp,\n        'idp_scope': tokenParams.idpScope,\n        'login_hint': tokenParams.loginHint,\n        'max_age': tokenParams.maxAge,\n        'nonce': tokenParams.nonce,\n        'prompt': tokenParams.prompt,\n        'redirect_uri': tokenParams.redirectUri,\n        'response_mode': tokenParams.responseMode,\n        'response_type': tokenParams.responseType,\n        'sessionToken': tokenParams.sessionToken,\n        'state': tokenParams.state,\n    };\n    oauthParams = removeNils(oauthParams);\n    ['idp_scope', 'response_type'].forEach(function (mayBeArray) {\n        if (Array.isArray(oauthParams[mayBeArray])) {\n            oauthParams[mayBeArray] = oauthParams[mayBeArray].join(' ');\n        }\n    });\n    if (tokenParams.responseType.indexOf('id_token') !== -1 &&\n        tokenParams.scopes.indexOf('openid') === -1) {\n        throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n    }\n    else {\n        oauthParams.scope = tokenParams.scopes.join(' ');\n    }\n    return oauthParams;\n}\nfunction buildAuthorizeParams(tokenParams) {\n    var oauthQueryParams = convertTokenParamsToOAuthParams(tokenParams);\n    return toQueryString(oauthQueryParams);\n}\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getToken\" takes only a single set of options'));\n    }\n    options = options || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        // Start overriding any options that don't make sense\n        var sessionTokenOverrides = {\n            prompt: 'none',\n            responseMode: 'okta_post_message',\n            display: null\n        };\n        var idpOverrides = {\n            display: 'popup'\n        };\n        if (options.sessionToken) {\n            Object.assign(tokenParams, sessionTokenOverrides);\n        }\n        else if (options.idp) {\n            Object.assign(tokenParams, idpOverrides);\n        }\n        // Use the query params to build the authorize url\n        var requestUrl, endpoint, urls;\n        // Get authorizeUrl and issuer\n        urls = getOAuthUrls(sdk, tokenParams);\n        endpoint = options.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n        requestUrl = endpoint + buildAuthorizeParams(tokenParams);\n        // Determine the flow type\n        var flowType;\n        if (tokenParams.sessionToken || tokenParams.display === null) {\n            flowType = 'IFRAME';\n        }\n        else if (tokenParams.display === 'popup') {\n            flowType = 'POPUP';\n        }\n        else {\n            flowType = 'IMPLICIT';\n        }\n        // Execute the flow type\n        switch (flowType) {\n            case 'IFRAME':\n                var iframePromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                var iframeEl = loadFrame(requestUrl);\n                return iframePromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (document.body.contains(iframeEl)) {\n                        iframeEl.parentElement.removeChild(iframeEl);\n                    }\n                });\n            case 'POPUP':\n                var oauthPromise; // resolves with OAuth response\n                // Add listener on postMessage before window creation, so\n                // postMessage isn't triggered before we're listening\n                if (tokenParams.responseMode === 'okta_post_message') {\n                    if (!sdk.features.isPopupPostMessageSupported()) {\n                        throw new AuthSdkError('This browser doesn\\'t have full postMessage support');\n                    }\n                    oauthPromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                }\n                // Create the window\n                var windowOptions = {\n                    popupTitle: options.popupTitle\n                };\n                var windowEl = loadPopup(requestUrl, windowOptions);\n                // The popup may be closed without receiving an OAuth response. Setup a poller to monitor the window.\n                var popupPromise = new Promise(function (resolve, reject) {\n                    var closePoller = setInterval(function () {\n                        if (!windowEl || windowEl.closed) {\n                            clearInterval(closePoller);\n                            reject(new AuthSdkError('Unable to parse OAuth flow response'));\n                        }\n                    }, 100);\n                    // Proxy the OAuth promise results\n                    oauthPromise\n                        .then(function (res) {\n                        clearInterval(closePoller);\n                        resolve(res);\n                    })\n                        .catch(function (err) {\n                        clearInterval(closePoller);\n                        reject(err);\n                    });\n                });\n                return popupPromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (windowEl && !windowEl.closed) {\n                        windowEl.close();\n                    }\n                });\n            default:\n                throw new AuthSdkError('The full page redirect flow is not supported');\n        }\n    });\n}\nfunction getWithoutPrompt(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithoutPrompt\" takes only a single set of options'));\n    }\n    if (isLoginRedirect(sdk)) {\n        return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' +\n            'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        prompt: 'none',\n        responseMode: 'okta_post_message',\n        display: null\n    });\n    return getToken(sdk, options);\n}\nfunction getWithPopup(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithPopup\" takes only a single set of options'));\n    }\n    if (isLoginRedirect(sdk)) {\n        return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' +\n            'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        display: 'popup',\n        responseMode: 'okta_post_message'\n    });\n    return getToken(sdk, options);\n}\n// Prepares params for a call to /authorize or /token\nfunction prepareTokenParams(sdk, tokenParams) {\n    // build params using defaults + options\n    tokenParams = Object.assign({}, getDefaultTokenParams(sdk), clone(tokenParams));\n    if (tokenParams.pkce === false) {\n        // Implicit flow or authorization_code without PKCE\n        return Promise.resolve(tokenParams);\n    }\n    // PKCE flow\n    if (!sdk.features.isPKCESupported()) {\n        var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n        if (!sdk.features.isHTTPS()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol.';\n        }\n        if (!sdk.features.hasTextEncoder()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\n\"TextEncoder\" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.';\n        }\n        return Promise.reject(new AuthSdkError(errorMessage));\n    }\n    // set default code challenge method, if none provided\n    if (!tokenParams.codeChallengeMethod) {\n        tokenParams.codeChallengeMethod = DEFAULT_CODE_CHALLENGE_METHOD;\n    }\n    // responseType is forced\n    tokenParams.responseType = 'code';\n    return getWellKnown(sdk, null)\n        .then(function (res) {\n        var methods = res['code_challenge_methods_supported'] || [];\n        if (methods.indexOf(tokenParams.codeChallengeMethod) === -1) {\n            throw new AuthSdkError('Invalid code_challenge_method');\n        }\n    })\n        .then(function () {\n        if (!tokenParams.codeVerifier) {\n            tokenParams.codeVerifier = PKCE.generateVerifier();\n        }\n        return PKCE.computeChallenge(tokenParams.codeVerifier);\n    })\n        .then(function (codeChallenge) {\n        // Clone/copy the params. Set codeChallenge\n        var clonedParams = clone(tokenParams) || {};\n        Object.assign(clonedParams, tokenParams, {\n            codeChallenge: codeChallenge,\n        });\n        return clonedParams;\n    });\n}\nfunction _addOAuthParamsToStorage(sdk, tokenParams, urls) {\n    const { responseType, state, nonce, scopes, clientId, ignoreSignature } = tokenParams;\n    const tokenParamsStr = JSON.stringify({\n        responseType,\n        state,\n        nonce,\n        scopes,\n        clientId,\n        urls,\n        ignoreSignature\n    });\n    // Add oauth_params to both cookies and sessionStorage for broader support\n    cookies.set(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr, null, sdk.options.cookies);\n    if (browserStorage.browserHasSessionStorage()) {\n        browserStorage.getSessionStorage().setItem(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr);\n    }\n}\nfunction getWithRedirect(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithRedirect\" takes only a single set of options'));\n    }\n    if (isLoginRedirect(sdk)) {\n        return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' +\n            'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n    options = clone(options) || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        var urls = getOAuthUrls(sdk, options);\n        var requestUrl = urls.authorizeUrl + buildAuthorizeParams(tokenParams);\n        _addOAuthParamsToStorage(sdk, tokenParams, urls);\n        // Set nonce cookie for servers to validate nonce in id_token\n        cookies.set(REDIRECT_NONCE_COOKIE_NAME, tokenParams.nonce, null, sdk.options.cookies);\n        // Set state cookie for servers to validate state\n        cookies.set(REDIRECT_STATE_COOKIE_NAME, tokenParams.state, null, sdk.options.cookies);\n        if (sdk.options.pkce) {\n            // We will need these values after redirect when we call /token\n            var meta = {\n                codeVerifier: tokenParams.codeVerifier,\n                redirectUri: tokenParams.redirectUri\n            };\n            PKCE.saveMeta(sdk, meta);\n        }\n        sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\nfunction renewToken(sdk, token) {\n    // Note: This is not used when a refresh token is present\n    if (!isToken(token)) {\n        return Promise.reject(new AuthSdkError('Renew must be passed a token with ' +\n            'an array of scopes and an accessToken or idToken'));\n    }\n    var responseType;\n    if (sdk.options.pkce) {\n        responseType = 'code';\n    }\n    else if (isAccessToken(token)) {\n        responseType = 'token';\n    }\n    else {\n        responseType = 'id_token';\n    }\n    const { scopes, authorizeUrl, userinfoUrl, issuer } = token;\n    return getWithoutPrompt(sdk, {\n        responseType,\n        scopes,\n        authorizeUrl,\n        userinfoUrl,\n        issuer\n    })\n        .then(function (res) {\n        // Multiple tokens may have come back. Return only the token which was requested.\n        var tokens = res.tokens;\n        return isIDToken(token) ? tokens.idToken : tokens.accessToken;\n    });\n}\nfunction renewTokensWithRefresh(sdk, tokenParams, refreshTokenObject) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var clientId = sdk.options.clientId;\n        if (!clientId) {\n            throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n        }\n        var urls = getOAuthUrls(sdk, tokenParams);\n        try {\n            const response = yield http.httpRequest(sdk, {\n                url: refreshTokenObject.tokenUrl,\n                method: 'POST',\n                withCredentials: false,\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                args: Object.entries({\n                    client_id: clientId,\n                    grant_type: 'refresh_token',\n                    scope: refreshTokenObject.scopes.join(' '),\n                    refresh_token: refreshTokenObject.refreshToken,\n                }).map(function ([name, value]) {\n                    return name + '=' + encodeURIComponent(value);\n                }).join('&'),\n            });\n            return handleOAuthResponse(sdk, tokenParams, response, urls).then(res => res.tokens);\n        }\n        catch (err) {\n            console.log({ err });\n        }\n    });\n}\nfunction renewTokens(sdk, options) {\n    // If we have a refresh token, renew using that, otherwise getWithoutPrompt\n    // Calling via async as auth-js doesn't yet (as of 4.2) ensure that updateAuthState() was ever called\n    return sdk.tokenManager.getTokens()\n        .then(tokens => tokens.refreshToken)\n        .then(refreshTokenObject => {\n        if (refreshTokenObject) {\n            return renewTokensWithRefresh(sdk, options, refreshTokenObject);\n        }\n        options = Object.assign({\n            scopes: sdk.options.scopes,\n            authorizeUrl: sdk.options.authorizeUrl,\n            userinfoUrl: sdk.options.userinfoUrl,\n            issuer: sdk.options.issuer\n        }, options);\n        if (sdk.options.pkce) {\n            options.responseType = 'code';\n        }\n        else {\n            options.responseType = ['token', 'id_token'];\n        }\n        return getWithoutPrompt(sdk, options)\n            .then(res => res.tokens);\n    });\n}\nfunction removeHash(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n    }\n    else {\n        nativeLoc.hash = '';\n    }\n}\nfunction removeSearch(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n    }\n    else {\n        nativeLoc.search = '';\n    }\n}\nfunction _getOAuthParamsStrFromStorage() {\n    let oauthParamsStr;\n    if (browserStorage.browserHasSessionStorage()) {\n        oauthParamsStr = browserStorage.getSessionStorage().getItem(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    if (!oauthParamsStr) {\n        // fallback to cookies to support legacy browsers, e.g. IE/Edge\n        oauthParamsStr = cookies.get(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    // clear storages\n    if (browserStorage.browserHasSessionStorage()) {\n        browserStorage.getSessionStorage().removeItem(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    cookies.delete(REDIRECT_OAUTH_PARAMS_NAME);\n    return oauthParamsStr;\n}\nfunction parseFromUrl(sdk, options) {\n    options = options || {};\n    if (isString(options)) {\n        options = { url: options };\n    }\n    else {\n        options = options;\n    }\n    // https://openid.net/specs/openid-connect-core-1_0.html#Authentication\n    var defaultResponseMode = sdk.options.pkce ? 'query' : 'fragment';\n    var url = options.url;\n    var responseMode = options.responseMode || sdk.options.responseMode || defaultResponseMode;\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    var paramStr;\n    if (responseMode === 'query') {\n        paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n    }\n    else {\n        paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n    }\n    if (!paramStr) {\n        return Promise.reject(new AuthSdkError('Unable to parse a token from the url'));\n    }\n    const oauthParamsStr = _getOAuthParamsStrFromStorage();\n    if (!oauthParamsStr) {\n        return Promise.reject(new AuthSdkError('Unable to retrieve OAuth redirect params from storage'));\n    }\n    try {\n        var oauthParams = JSON.parse(oauthParamsStr);\n        var urls = oauthParams.urls;\n        delete oauthParams.urls;\n    }\n    catch (e) {\n        return Promise.reject(new AuthSdkError('Unable to parse the ' +\n            REDIRECT_OAUTH_PARAMS_NAME + ' value from storage: ' + e.message));\n    }\n    return Promise.resolve(urlParamsToObject(paramStr))\n        .then(function (res) {\n        if (!url) {\n            // Clean hash or search from the url\n            responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n        }\n        if (sdk.options.pkce) {\n            const meta = PKCE.loadMeta(sdk);\n            const { codeVerifier, redirectUri } = meta;\n            oauthParams = Object.assign({\n                codeVerifier,\n                redirectUri\n            }, oauthParams);\n        }\n        return handleOAuthResponse(sdk, oauthParams, res, urls)\n            .finally(() => {\n            if (sdk.options.pkce) {\n                PKCE.clearMeta(sdk);\n            }\n        });\n    });\n}\nfunction getUserInfo(sdk, accessTokenObject, idTokenObject) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // If token objects were not passed, attempt to read from the TokenManager\n        if (!accessTokenObject) {\n            accessTokenObject = (yield sdk.tokenManager.getTokens()).accessToken;\n        }\n        if (!idTokenObject) {\n            idTokenObject = (yield sdk.tokenManager.getTokens()).idToken;\n        }\n        if (!accessTokenObject || !isAccessToken(accessTokenObject)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n        }\n        if (!idTokenObject || !isIDToken(idTokenObject)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n        }\n        return http.httpRequest(sdk, {\n            url: accessTokenObject.userinfoUrl,\n            method: 'GET',\n            accessToken: accessTokenObject.accessToken\n        })\n            .then(userInfo => {\n            // Only return the userinfo response if subjects match to mitigate token substitution attacks\n            if (userInfo.sub === idTokenObject.claims.sub) {\n                return userInfo;\n            }\n            return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n        })\n            .catch(function (err) {\n            if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n                var authenticateHeader;\n                if (err.xhr.headers && isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n                    authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n                }\n                else if (isFunction(err.xhr.getResponseHeader)) {\n                    authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n                }\n                if (authenticateHeader) {\n                    var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n                    var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n                    var error = errorMatches[1];\n                    var errorDescription = errorDescriptionMatches[1];\n                    if (error && errorDescription) {\n                        err = new OAuthError(error, errorDescription);\n                    }\n                }\n            }\n            throw err;\n        });\n    });\n}\nexport { revokeToken, getToken, getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, renewToken, renewTokens, getUserInfo, verifyToken, handleOAuthResponse, getDefaultTokenParams, prepareTokenParams, exchangeCodeForTokens, _addOAuthParamsToStorage, // export for testing purpose\n_getOAuthParamsStrFromStorage, };\n","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global crypto */\nimport { stringToBase64Url, clone, stringToBuffer, base64UrlDecode } from './util';\nfunction getOidcHash(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var intBuffer = new Uint8Array(arrayBuffer);\n        var firstHalf = intBuffer.slice(0, 16);\n        var hash = String.fromCharCode.apply(null, firstHalf);\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction verifyToken(idToken, key) {\n    key = clone(key);\n    var format = 'jwk';\n    var algo = {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: { name: 'SHA-256' }\n    };\n    var extractable = true;\n    var usages = ['verify'];\n    // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n    // This is a metadata tag that specifies the intent of how the key should be used.\n    // It's not necessary to properly verify the jwt's signature.\n    delete key.use;\n    // @ts-ignore\n    return crypto.subtle.importKey(format, key, algo, extractable, usages)\n        .then(function (cryptoKey) {\n        var jwt = idToken.split('.');\n        var payload = stringToBuffer(jwt[0] + '.' + jwt[1]);\n        var b64Signature = base64UrlDecode(jwt[2]);\n        var signature = stringToBuffer(b64Signature);\n        return crypto.subtle.verify(algo, cryptoKey, signature, payload);\n    });\n}\nexport { getOidcHash, verifyToken };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport function isToken(obj) {\n    if (obj &&\n        (obj.accessToken || obj.idToken || obj.refreshToken) &&\n        Array.isArray(obj.scopes)) {\n        return true;\n    }\n    return false;\n}\nexport function isAccessToken(obj) {\n    return obj && obj.accessToken;\n}\nexport function isIDToken(obj) {\n    return obj && obj.idToken;\n}\nexport function isRefreshToken(obj) {\n    return obj && obj.refreshToken;\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class SdkClock {\n    constructor(localOffset) {\n        // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n        this.localOffset = parseInt(localOffset || 0);\n    }\n    // factory method. Create an instance of a clock from current context.\n    static create( /* sdk, options */) {\n        // TODO: calculate localOffset\n        var localOffset = 0;\n        return new SdkClock(localOffset);\n    }\n    // Return the current time (in seconds)\n    now() {\n        var now = (Date.now() + this.localOffset) / 1000;\n        return now;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\nimport { isPromise } from './util';\nclass PromiseQueue {\n    constructor() {\n        this.queue = [];\n        this.running = false;\n    }\n    // Returns a promise\n    // If the method is synchronous, it will resolve when the method completes\n    // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n    push(method, thisObject, ...args) {\n        return new Promise((resolve, reject) => {\n            this.queue.push({\n                method,\n                thisObject,\n                args,\n                resolve,\n                reject\n            });\n            this.run();\n        });\n    }\n    run() {\n        if (this.running) {\n            return;\n        }\n        if (this.queue.length === 0) {\n            return;\n        }\n        this.running = true;\n        var queueItem = this.queue.shift();\n        var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n        if (isPromise(res)) {\n            res.then(queueItem.resolve, queueItem.reject).finally(() => {\n                this.running = false;\n                this.run();\n            });\n        }\n        else {\n            queueItem.resolve(res);\n            this.running = false;\n            this.run();\n        }\n    }\n}\nexport default PromiseQueue;\n","import { AuthSdkError } from '../errors';\nimport { isFingerprintSupported } from './features';\nimport { addListener, removeListener } from '../oauthUtil';\nexport default function fingerprint(sdk, options) {\n    options = options || {};\n    if (!isFingerprintSupported()) {\n        return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n    }\n    var timeout;\n    var iframe;\n    var listener;\n    var promise = new Promise(function (resolve, reject) {\n        iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        // eslint-disable-next-line complexity\n        listener = function listener(e) {\n            if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n                return;\n            }\n            try {\n                var msg = JSON.parse(e.data);\n            }\n            catch (err) {\n                // iframe messages should all be parsable\n                // skip not parsable messages come from other sources in same origin (browser extensions)\n                // TODO: add namespace flag in okta-core to distinguish messages that come from other sources\n                return;\n            }\n            if (!msg) {\n                return;\n            }\n            if (msg.type === 'FingerprintAvailable') {\n                return resolve(msg.fingerprint);\n            }\n            if (msg.type === 'FingerprintServiceReady') {\n                e.source.postMessage(JSON.stringify({\n                    type: 'GetFingerprint'\n                }), e.origin);\n            }\n        };\n        addListener(window, 'message', listener);\n        iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n        document.body.appendChild(iframe);\n        timeout = setTimeout(function () {\n            reject(new AuthSdkError('Fingerprinting timed out'));\n        }, options.timeout || 15000);\n    });\n    return promise.finally(function () {\n        clearTimeout(timeout);\n        removeListener(window, 'message', listener);\n        if (document.body.contains(iframe)) {\n            iframe.parentElement.removeChild(iframe);\n        }\n    });\n}\n","import { AuthSdkError } from './errors';\nimport { getConsole, warn } from './util';\nimport { EVENT_ADDED, EVENT_REMOVED } from './TokenManager';\nconst PCancelable = require('p-cancelable');\nexport const DEFAULT_AUTH_STATE = {\n    isPending: true,\n    isAuthenticated: false,\n    idToken: null,\n    accessToken: null,\n    refreshToken: null,\n};\nconst DEFAULT_PENDING = {\n    updateAuthStatePromise: null,\n    canceledTimes: 0\n};\nconst EVENT_AUTH_STATE_CHANGE = 'authStateChange';\nconst MAX_PROMISE_CANCEL_TIMES = 10;\n// only compare first level of authState\nconst isSameAuthState = (prevState, state) => {\n    return prevState.isPending === state.isPending\n        && prevState.isAuthenticated === state.isAuthenticated\n        && JSON.stringify(prevState.idToken) === JSON.stringify(state.idToken)\n        && JSON.stringify(prevState.accessToken) === JSON.stringify(state.accessToken)\n        && prevState.error === state.error;\n};\nexport class AuthStateManager {\n    constructor(sdk) {\n        if (!sdk.emitter) {\n            throw new AuthSdkError('Emitter should be initialized before AuthStateManager');\n        }\n        this._sdk = sdk;\n        this._pending = Object.assign({}, DEFAULT_PENDING);\n        this._authState = Object.assign({}, DEFAULT_AUTH_STATE);\n        this._logOptions = {};\n        // Listen on tokenManager events to start updateState process\n        // \"added\" event is emitted in both add and renew process\n        // Only listen on \"added\" event to update auth state\n        sdk.tokenManager.on(EVENT_ADDED, (key, token) => {\n            this._setLogOptions({ event: EVENT_ADDED, key, token });\n            this.updateAuthState();\n        });\n        sdk.tokenManager.on(EVENT_REMOVED, (key, token) => {\n            this._setLogOptions({ event: EVENT_REMOVED, key, token });\n            this.updateAuthState();\n        });\n    }\n    _setLogOptions(options) {\n        this._logOptions = options;\n    }\n    getAuthState() {\n        return this._authState;\n    }\n    updateAuthState() {\n        if (!this._sdk.emitter.e\n            || !this._sdk.emitter.e[EVENT_AUTH_STATE_CHANGE]\n            || !this._sdk.emitter.e[EVENT_AUTH_STATE_CHANGE].length) {\n            warn('updateAuthState is an asynchronous method with no return, ' +\n                'please subscribe to the latest authState update with ' +\n                'authStateManager.subscribe(handler) method before calling updateAuthState.');\n        }\n        const { transformAuthState, devMode } = this._sdk.options;\n        const { autoRenew, autoRemove } = this._sdk.tokenManager._getOptions();\n        const log = (status) => {\n            const { event, key, token } = this._logOptions;\n            getConsole().group(`OKTA-AUTH-JS:updateAuthState: Event:${event} Status:${status}`);\n            getConsole().log(key, token);\n            getConsole().log('Current authState', this._authState);\n            getConsole().groupEnd();\n            // clear log options after logging\n            this._logOptions = {};\n        };\n        const emitAuthStateChange = (authState) => {\n            if (isSameAuthState(this._authState, authState)) {\n                devMode && log('unchanged');\n                return;\n            }\n            this._authState = authState;\n            // emit new authState object\n            this._sdk.emitter.emit(EVENT_AUTH_STATE_CHANGE, Object.assign({}, authState));\n            devMode && log('emitted');\n        };\n        const shouldEvaluateIsPending = () => (autoRenew || autoRemove);\n        if (this._pending.updateAuthStatePromise) {\n            if (this._pending.canceledTimes >= MAX_PROMISE_CANCEL_TIMES) {\n                // stop canceling then starting a new promise\n                // let existing promise finish to prevent running into loops\n                devMode && log('terminated');\n                return;\n            }\n            else {\n                this._pending.updateAuthStatePromise.cancel();\n            }\n        }\n        /* eslint-disable complexity */\n        const cancelablePromise = new PCancelable((resolve, _, onCancel) => {\n            onCancel.shouldReject = false;\n            onCancel(() => {\n                this._pending.updateAuthStatePromise = null;\n                this._pending.canceledTimes = this._pending.canceledTimes + 1;\n                devMode && log('canceled');\n            });\n            const emitAndResolve = (authState) => {\n                if (cancelablePromise.isCanceled) {\n                    resolve();\n                    return;\n                }\n                // emit event and clear pending states\n                emitAuthStateChange(authState);\n                this._pending = Object.assign({}, DEFAULT_PENDING);\n                resolve();\n            };\n            this._sdk.tokenManager.getTokens()\n                .then(({ accessToken, idToken, refreshToken }) => {\n                if (cancelablePromise.isCanceled) {\n                    resolve();\n                    return;\n                }\n                // evaluate isPending if any token is expired\n                // then wait for next renewed event to evaluate a new state with valid tokens\n                // isPending state should only apply to token driven evaluation\n                let isPending = false;\n                if (accessToken && this._sdk.tokenManager.hasExpired(accessToken)) {\n                    accessToken = null;\n                    isPending = shouldEvaluateIsPending();\n                }\n                if (idToken && this._sdk.tokenManager.hasExpired(idToken)) {\n                    idToken = null;\n                    isPending = shouldEvaluateIsPending();\n                }\n                const authState = {\n                    accessToken,\n                    idToken,\n                    refreshToken,\n                    isPending,\n                    isAuthenticated: !!(accessToken && idToken)\n                };\n                const promise = transformAuthState\n                    ? transformAuthState(this._sdk, authState)\n                    : Promise.resolve(authState);\n                promise\n                    .then(authState => emitAndResolve(authState))\n                    .catch(error => emitAndResolve({\n                    accessToken,\n                    idToken,\n                    refreshToken,\n                    isAuthenticated: false,\n                    isPending: false,\n                    error\n                }));\n            });\n        });\n        /* eslint-enable complexity */\n        this._pending.updateAuthStatePromise = cancelablePromise;\n    }\n    subscribe(handler) {\n        this._sdk.emitter.on(EVENT_AUTH_STATE_CHANGE, handler);\n    }\n    unsubscribe(handler) {\n        this._sdk.emitter.off(EVENT_AUTH_STATE_CHANGE, handler);\n    }\n}\n","'use strict';\n\nclass CancelError extends Error {\n\tconstructor(reason) {\n\t\tsuper(reason || 'Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n\n\tget isCanceled() {\n\t\treturn true;\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(userFn) {\n\t\treturn (...arguments_) => {\n\t\t\treturn new PCancelable((resolve, reject, onCancel) => {\n\t\t\t\targuments_.push(onCancel);\n\t\t\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t\t\tuserFn(...arguments_).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._cancelHandlers = [];\n\t\tthis._isPending = true;\n\t\tthis._isCanceled = false;\n\t\tthis._rejectOnCancel = true;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\tconst onResolve = value => {\n\t\t\t\tthis._isPending = false;\n\t\t\t\tresolve(value);\n\t\t\t};\n\n\t\t\tconst onReject = error => {\n\t\t\t\tthis._isPending = false;\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\tconst onCancel = handler => {\n\t\t\t\tif (!this._isPending) {\n\t\t\t\t\tthrow new Error('The `onCancel` handler was attached after the promise settled.');\n\t\t\t\t}\n\n\t\t\t\tthis._cancelHandlers.push(handler);\n\t\t\t};\n\n\t\t\tObject.defineProperties(onCancel, {\n\t\t\t\tshouldReject: {\n\t\t\t\t\tget: () => this._rejectOnCancel,\n\t\t\t\t\tset: boolean => {\n\t\t\t\t\t\tthis._rejectOnCancel = boolean;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn executor(onResolve, onReject, onCancel);\n\t\t});\n\t}\n\n\tthen(onFulfilled, onRejected) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.then(onFulfilled, onRejected);\n\t}\n\n\tcatch(onRejected) {\n\t\treturn this._promise.catch(onRejected);\n\t}\n\n\tfinally(onFinally) {\n\t\treturn this._promise.finally(onFinally);\n\t}\n\n\tcancel(reason) {\n\t\tif (!this._isPending || this._isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._cancelHandlers.length > 0) {\n\t\t\ttry {\n\t\t\t\tfor (const handler of this._cancelHandlers) {\n\t\t\t\t\thandler();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis._reject(error);\n\t\t\t}\n\t\t}\n\n\t\tthis._isCanceled = true;\n\t\tif (this._rejectOnCancel) {\n\t\t\tthis._reject(new CancelError(reason));\n\t\t}\n\t}\n\n\tget isCanceled() {\n\t\treturn this._isCanceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n"],"sourceRoot":""}